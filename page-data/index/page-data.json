{"componentChunkName":"component---src-pages-index-js","path":"/","webpackCompilationHash":"0d00205807289c080246","result":{"data":{"allMarkdownRemark":{"totalCount":21,"edges":[{"node":{"id":"e3270286-1571-59ba-aa71-fefb559edbc4","frontmatter":{"title":"New video: Linux containers","path":"/writing/linux-containers-wordpress-video","date":"14 October 2019","attract":"I've created my first YouTube video explaining some basics around using LXD.","commentary":false},"html":"<p>Please take a look at my new video explaining how to set up Wordpress using Linux containers.  Looking forward for any feedback you can share.</p>\n<p><a href=\"https://www.youtube.com/watch?v=1p-fbS_OYTg\">YouTube: Linux containers are really good</a>.</p>"}},{"node":{"id":"a77b89b9-554f-50fd-86f3-f6b3da124cb0","frontmatter":{"title":"Firefox new tab positioning behavior","path":"/writing/firefox-new-tab-behavior","date":"26 September 2019","attract":"A simple about:config change to make new tabs launch next to the current tab.","commentary":false},"html":"<p>I've always been briefly annoyed at the new tab behavior when opening tabs on Firefox: namely that they open at the right most end of the tab bar.  I think this decision probably has a lot of history but given that I'll have multiple tabs open at any time, I like to keep related tabs together, sort of a poor man's tree-style-tabs if you will.</p>\n<p>Now even though there are a <a href=\"https://addons.mozilla.org/en-US/firefox/addon/always-right/\">few</a> extensions that fix this and I'm also thinking about writing my own :), you can simply change your about:config as well to enable this change.</p>\n<p>Set <code class=\"language-text\">browser.tabs.insertAfterCurrent</code> in about:config to true.  I'm using Firefox Beta 70.0b9 so this may not be available in the current release yet.</p>"}},{"node":{"id":"1656d1c0-626a-53e8-aba8-e0f06bcedca8","frontmatter":{"title":"VSCode Extensions","path":"/writing/preferred-vs-code-extensions","date":"26 August 2019","attract":"What I use to get comfortable in VSCode.","commentary":false},"html":"<p><strong>Keywords: vscode, extensions, microsoft windows</strong></p>\n<p>I've recently started doing my development entirely in containers and virtual machines (with the exception of iOS development).</p>\n<p>This has enabled me to switch computers and use Git to keep them in sync.  On Windows, I prefer using VSCode for my development and on Mac I fullscreen the VM and use dwm + rxvt-unicode.  While I'm not 100% sure about the future of VSCode with Microsoft at the helm nor am I super happy about Electron being the framework it's built on, but you can't deny it's a good environment to write javascript and do basic development.</p>\n<h1>Bringing over vim settings</h1>\n<p>As of writing, my <a href=\"https://github.com/xocite/dotrc/blob/master/vimrc\">.vimrc</a> is pretty minimal.</p>\n<ul>\n<li>\n<p>80 character width with forced wrap (not visual wrap)</p>\n<ul>\n<li>\"rewrap.autoWrap.enabled\": true</li>\n<li>\"rewrap.doubleSentenceSpacing\": true</li>\n<li>\"rewrap.wrappingColumn\": 80</li>\n</ul>\n</li>\n<li>tabs turned into spaces and tabstop of 2 spaces: \"editor.tabSize\": 2</li>\n<li>automatically indent according to language paradigms</li>\n<li>UTF-8 encoding: by default in VSCode</li>\n</ul>\n<p>I'm only using three extensions at the moment:</p>\n<ul>\n<li><strong>ESLint</strong>: for debugging my Gatsby website</li>\n<li><strong>Rewrap</strong>: for maintaining that 80 character width master race</li>\n<li><strong>Remote</strong>: Microsoft's remote extensions to work with containers</li>\n</ul>"}},{"node":{"id":"a23dbcb4-85f6-5955-a2a8-3ee60f47dcaf","frontmatter":{"title":"About","path":"/about","date":"24 August 2019","attract":"My about page, now written in Markdown.","commentary":null},"html":"<h3>Hi <span role=\"img\" aria-label=\"Waving hand\">ðŸ‘‹</span>  Iâ€™m Antony, a technical product manager.</h3>\n<p>I have a passion for user experience.  Iâ€™ve worked at Microsoft, Agoda, Apple, and most recently on my own startup, Binaural Waves, crafting products that people love and use everyday.  I have technical experience in programming, system administration, and data crunching, in addition to driving features to their conclusion through product management.  Iâ€™ve traveled and worked across the globe and I take my worldwide experiences with me everywhere.</p>\n<p>I'm also passionate about new input modalities.  I think the keyboard and mouse,\nwhile likely here to stay for another decade or so, will eventually be replaced\nby new modalities that allow a broader range of expression.  This transition\nwill begin with programming.  I believe development should become a more\ninteractive experience not contrained by the 26 letters of the alphabet.  We\nshould be manipulating 3D objects instead -- which will give us an entire new\ndimension to think about.</p>\n<p>Furthermore, we should dive deeper into abnormal brain responses, like seizures\nand synthesia, to see if there's additional input via light or sound that we're\nnot harnassing.  Programming shouldn't be a visual only affair and we should be\nable to use sound to augment what's being displayed on the screen.</p>\n<p>We should explore why seizures can be caused by flashing lights and see if there's an opportunity to turn this trigger into a way to communicate with the brain.  Furthermore, binaural beats are often lauded as a way to excite the various frequencies upon our brain operates.  Attuning our interface development to be more cognizant of the flexibility of human hearing and sight is something missing in today's interfaces.</p>\n<p>Back in 2008, I only had two devices.  Now, I have a variety of always connected\ndevices to maintain.  My primary device is my Macbook Pro, upon which I run\nvarious containers and virtual machines to stay abreast of the latest Linux\ndistributions and packages.  My secondary device is an old Dell M6800 which\nserves as an excellent Debian server.  I also have a phone.  All are gated\nbehind a pfsense router.</p>\n<p>In the next decade or so, we'll see huge advancements in network coverage, upload speed,lossless compression, and power storage.  These in tandem will give way to new applications such as in YouTube where videos is downloaded directly from creator's devices instead of being stored on a centralised server.</p>\n<p>In my spare time, I enjoy running, as I did when young, as a way to stay healthy\nand upbeat.  Music is also one of my favourite pastimes and you'll find me\nlistening to\n<a href=\"http://www.ulrich-schnauss.com\">Ulrich Schnauss</a>,\n<a href=\"https://bleep.com/artist/78-boards-of-canada\">Boards of Canda</a>\n<a href=\"http://radiohead.com\">Radiohead</a>,\nand <a href=\"https://en.wikipedia.org/wiki/Girls%27_Generation\">Girls' Generation</a>,\namong others.</p>\n<p>Finally, I consider myself an avid reader and enjoy works from the likes of Stephen King, Ken Catran, Ayn Rand, and many others.  See my <a href=\"/bookshelf\">bookshelf</a></p>"}},{"node":{"id":"162f0e85-a034-5c7c-9caa-0f1e038fa6c5","frontmatter":{"title":"RHCSA Exam Prep: Part 2: Essential Tools","path":"/writing/redhat-csa-rhcsa-prep-p2","date":"24 August 2019","attract":"These are my RHCSA notes.","commentary":false},"html":"<p><strong>Keywords: rhsca, preparation, exam, linux, system administrator</strong></p>\n<p>This is part two of my <a href=\"https://www.redhat.com/en/services/training/ex200-red-hat-certified-system-administrator-rhcsa-exam\">RHCSA</a> preparation series.   In this part, we'll cover the\nfirst exam objective: </p>\n<ul>\n<li>Understand and use essential tools for handling files, directories,\ncommandline environments, and documentation. <em>Essential tools</em></li>\n</ul>\n<h1>Essential tools</h1>\n<p>I imagine this is the simplest exam topic that probably won't need anything more\nthan a 10 minute refresher.</p>\n<p>From the guidelines, we'll cover:</p>\n<ul>\n<li>[ET.1] Access a shell prompt and issue commands with correct syntax</li>\n<li>[ET.2] Use input-output redirection (>, >>, |, 2> , etc.)</li>\n<li>[ET.3] Use grep and regular expressions to analyse text</li>\n<li>[ET.4] Access remote systems using SSH</li>\n<li>[ET.5] Log in and switch users in multiuser targets</li>\n<li>[ET.6] Archive, compress, unpack, and uncompress files using tar, star, gzip, and bzip2</li>\n<li>[ET.7] Create and edit text files</li>\n<li>[ET.8] Create, delete, copy, and move files and directories</li>\n<li>[ET.9] Create hard and soft links</li>\n<li>[ET.10] List, set, and change standard ugo/rwx permissions</li>\n<li>[ET.11] Locate, read, and use system documentation including man, info, and files in /usr/share/doc</li>\n</ul>\n<h1>[ET.1] Access a shell prompt and issue commands with correct syntax</h1>\n<h2>Console</h2>\n<p>The console is where you can receive output from the kernel and type commands to\nthe kernel.  Navigating between consoles is typically done with <code class=\"language-text\">Ctrl+Alt+Fn</code>,\nwhere n is the number of the console and F is one of the function keys.  Virtual\nconsoles are accessed at the physical machine, not remotely.  Graphical\ninstallations typically take place on console 6.</p>\n<h2>Basic commands</h2>\n<p>Here are the most basic commands you will use in day-to-day administration:</p>\n<h3>Navigation and file manipulation</h3>\n<ul>\n<li><code class=\"language-text\">ls</code>: list directory contents</li>\n<li><code class=\"language-text\">cd</code>: change directory</li>\n<li><code class=\"language-text\">rm</code>: remove</li>\n<li><code class=\"language-text\">mv</code>: move</li>\n<li><code class=\"language-text\">cp</code>: copy</li>\n<li><code class=\"language-text\">pwd</code>: print working directory</li>\n<li><code class=\"language-text\">mkdir</code>: make directory</li>\n<li><code class=\"language-text\">touch</code>: make file</li>\n<li><code class=\"language-text\">head</code>: read first 10 lines of file</li>\n<li><code class=\"language-text\">tail</code>: read last 10 lines of file</li>\n<li><code class=\"language-text\">locate</code>: find file</li>\n<li><code class=\"language-text\">grep</code>: search a file</li>\n</ul>\n<h3>Output and user information</h3>\n<ul>\n<li><code class=\"language-text\">echo</code>: write to output </li>\n<li><code class=\"language-text\">id</code>: list user and group IDs</li>\n<li><code class=\"language-text\">date</code>: print the date</li>\n</ul>\n<h3>Manipulating the environment</h3>\n<ul>\n<li><code class=\"language-text\">set</code>: show shell variables</li>\n<li><code class=\"language-text\">alias</code>: create shell alias</li>\n<li><code class=\"language-text\">env</code>: show exported variables (from the parent process)</li>\n<li><code class=\"language-text\">which</code>: show which command from the shell's PATH would run</li>\n<li><code class=\"language-text\">type</code>: show what type of file </li>\n</ul>\n<h1>[ET.2] Use input-output redirection (>, >>, |, 2> , etc.)</h1>\n<p>Inside bash there are three file descriptors: <code class=\"language-text\">STDOUT</code>, <code class=\"language-text\">STDERR</code>,\nand <code class=\"language-text\">STDIN</code>.</p>\n<h2>STDOUT</h2>\n<p>STOUT is represented by file descriptor 1.  You use the redirection operator to\nsend output somewhere else.  <code class=\"language-text\">ls 1&gt;file1.txt</code> sends the output of the command to\nthe file entitled <code class=\"language-text\">file1.txt</code>.</p>\n<h2>STDERR</h2>\n<p>STOUT is represented by file descriptor 2.  You use the redirection operator to\nsend output somewhere else.  <code class=\"language-text\">ls 2&gt;file1.txt</code> sends any errors from running the\ncommand to the file and still sends <code class=\"language-text\">STDOUT</code> to the virtual console.</p>\n<h2>Redirecting both to a file</h2>\n<p>You can reference the address of a redirection file descriptor to send them to\neach other.</p>\n<p>For example, <code class=\"language-text\">2&gt;&amp;1</code> means send anything sent to STDERR is redirected to where STDOUT is\npointing.  Another way of specifying this is to use <code class=\"language-text\">&gt;&amp;</code> which is the same as\nthe previous incantation.</p>\n<p>Keep in mind that STDERR is an unbuffered stream so it writes output\nimmediately.  STDOUT is not so you may want to send each to different files,\nlike so: <code class=\"language-text\">ls &gt;file.txt 2&gt;file-error.txt</code> to avoid output from STDERR to appear\npiecemeal inside STDOUT output.</p>\n<h2>Redirection with >></h2>\n<p>The only difference between <code class=\"language-text\">&gt;</code> and <code class=\"language-text\">&gt;&gt;</code> is that the latter appends and the\nformer overwrites.</p>\n<h2>Piping</h2>\n<p>You can chain command output to other programs using piping.  It's much like\nredirection except the output comes from STDOUT of one program to the STDIN\nof another.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ ls | head\namplifyPublishIgnore.json\ndefault.txt\ngatsby-browser.js\ngatsby-config.js\ngatsby-node.js\ngatsby-ssr.js\nLICENSE\nnode_modules\npackage.json\npackage-lock.json\n$ ls | head | wc -l\n10</code></pre></div>\n<h2>Redirecting to STDIN</h2>\n<p>Using the <code class=\"language-text\">&lt;</code> operator we can send input to a programs.  Keep in mind that\nprograms will not have any metadata about the input.  <code class=\"language-text\">cat &lt; hello.txt</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ touch hello.txt\n$ echo &quot;five&quot; &gt; hello.txt\n$ cat hello.txt\nfive\n$ cat &lt; hello.txt\nfive</code></pre></div>\n<h1>[ET.3] Use grep and regular expressions to analyse text</h1>\n<p>Grep is a very useful tool that can save you hours of writing shell scripts to\nquery results from a shell command.  At it's most basic invocation, it looks\nlike: <code class=\"language-text\">grep PATTERN</code>.</p>\n<p>Assume we have the following file called <code class=\"language-text\">hello.txt</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Very nice to meet you.\n\nHow have you been today.\n\nWhere are you going tomorrow.\n\nHow is the weather.\n\nSee you tomorrow tomorrow</code></pre></div>\n<p>Now, we want to see how many times \"tomorrow\" is written in this file, we can\nuse grep.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ grep tomorrow hello.txt \nWhere are you going tomorrow.\nSee you tomorrow tomorrow\n$ grep -c tomorrow hello.txt \n2</code></pre></div>\n<p>Note that it counts line matches not individual count of the search term.  If\ntomorrow was written twice on one line it would be counted once.</p>\n<h2>Options</h2>\n<p>Here are the most common options you should know.</p>\n<ul>\n<li><code class=\"language-text\">-i</code>: ignore case</li>\n<li><code class=\"language-text\">-c</code>: print count of matching lines</li>\n<li><code class=\"language-text\">-n</code>: print the matching line and its line number</li>\n<li><code class=\"language-text\">-l</code>: print only the file names of files that contain matches</li>\n<li><code class=\"language-text\">-H</code>: print the file name with the matching line (default if grepping multiple\nfiles).</li>\n<li><code class=\"language-text\">-A n</code>: show <code class=\"language-text\">n</code> lines after matching line</li>\n<li><code class=\"language-text\">-B n</code>: show <code class=\"language-text\">n</code> lines before matching line</li>\n<li><code class=\"language-text\">-C n</code>: show <code class=\"language-text\">n</code> lines before and after matching line</li>\n<li><code class=\"language-text\">-v</code>: print lines that don't match the pattern</li>\n</ul>\n<h2>Regular expressions (regexs)</h2>\n<p>Regular expressions can't be covered in detail here and certainly deserve their\nown set of books.  For ease of use I recommend using Perl style regex when using\ngrep: <code class=\"language-text\">grep -P</code>.</p>\n<p>Searching the kernel control ring buffer for all usb references in the 2-2\ndomain.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ dmesg | grep -Pi &#39;.*usb 2-2\\..*&#39; | head -n3\n[107075.519908] usb 2-2.1: new full-speed USB device number 4 using uhci_hcd\n[107075.618612] usb 2-2.1: New USB device found, idVendor=0e0f, idProduct=0004,\nbcdDevice= 1.00\n[107075.618616] usb 2-2.1: New USB device strings: Mfr=1, Product=2,\nSerialNumber=0</code></pre></div>\n<h1>[ET.4] Access remote systems using SSH</h1>\n<p>You'll absolutely need to understand SSH to access your testing environment.\nFortunately, the commands are pretty simple.  Keep in mind OpenSSH comes from\nthe BSD world so the command syntax is different than the GNU tools you're used\nto.</p>\n<h2>Options</h2>\n<p>These are the most common commands I use.</p>\n<ul>\n<li><code class=\"language-text\">-i identify_file</code>: use identity file when connecting</li>\n<li><code class=\"language-text\">-D port</code>: create a SOCKS5 server at specified port and send all incoming\nconnections over to the host</li>\n<li><code class=\"language-text\">-L port:host:hostport</code>: incoming connections on local port be forwarded to\ngiven host and port on the remote side.</li>\n<li><code class=\"language-text\">-p port</code>: port to use when connecting to the remote host.</li>\n<li><code class=\"language-text\">-X</code>: enable X11 forwarding</li>\n</ul>\n<h1>[ET.5] Log in and switch users in multiuser targets</h1>\n<p>SystemD is here and has replaced the init runlevels you may be familiar with.\nInstead, we refer to systemd targets.  Thankfully, the older runlevels can still\nbe referenced if required.</p>\n<h2>Targets</h2>\n<p>Get the default target with <code class=\"language-text\">systemctl get-default</code>.  List current target units\nwith <code class=\"language-text\">systemctl list-units --type target</code>.  Set the default with <code class=\"language-text\">systemctl\nset-default multi-user.target</code>.  Finally, change the current target with\n<code class=\"language-text\">isolate</code>: <code class=\"language-text\">systemctl isolate name.target</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ sudo systemctl get-default\nPassword:\ngraphical.target\n$ sudo systemctl list-units --type target\nUNIT                LOAD   ACTIVE SUB    DESCRIPTION                  \nbasic.target        loaded active active Basic System\ngetty.target        loaded active active Login Prompts\ngraphical.target    loaded active active Graphical Interface\nlocal-fs-pre.target loaded active active Local File Systems (Pre)\nlocal-fs.target     loaded active active Local File Systems\nmachines.target     loaded active active Containers\nmulti-user.target   loaded active active Multi-User System\nnetwork.target      loaded active active Network\nnss-lookup.target   loaded active active Host and Network Name Lookups\npaths.target        loaded active active Paths\nremote-fs.target    loaded active active Remote File Systems\nslices.target       loaded active active Slices\nsockets.target      loaded active active Sockets\nswap.target         loaded active active Swap\nsysinit.target      loaded active active System Initialization\ntime-set.target     loaded active active System Time Set\ntime-sync.target    loaded active active System Time Synchronized\ntimers.target       loaded active active Timers\n\nLOAD   = Reflects whether the unit definition was properly loaded.\nACTIVE = The high-level unit activation state, i.e. generalization of SUB.\nSUB    = The low-level unit activation state, values depend on unit type.\n\n18 loaded units listed. Pass --all to see loaded but inactive units, too.\nTo show all installed unit files use &#39;systemctl list-unit-files&#39;.</code></pre></div>\n<p>The main runlevel targets:</p>\n<ul>\n<li>{poweroff, rescue, multi-user, graphical, reboot}.target}</li>\n<li>You can also use emergency.target: <code class=\"language-text\">systemctl isolate emergency</code> if you can't\neven transition to the rescue runlevel.</li>\n</ul>\n<h2>Switching users</h2>\n<p>Switch users can be done using <code class=\"language-text\">su</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ su john\n$ </code></pre></div>\n<h1>[ET.6] Archive, compress, unpack, and uncompress files using tar, star, gzip, and bzip2</h1>\n<p>The tar command is the default and lauded command to package sets of files and directories together as well as compress them.  The default and preferred compression format is <code class=\"language-text\">bzip2</code>.  It can be used with tar or separately.</p>\n<h2>tar</h2>\n<p>Modern day <code class=\"language-text\">tar</code> has sane defaults and an invocation with <code class=\"language-text\">xf</code> will usually decompress any file it can handle: <code class=\"language-text\">tar xf file</code>.</p>\n<p>More options:</p>\n<ul>\n<li><code class=\"language-text\">c</code>: create.  Usually followed by <code class=\"language-text\">f</code> to indicate the filename of the new tarball.</li>\n<li><code class=\"language-text\">x</code>: extract.</li>\n<li><code class=\"language-text\">a</code>: append</li>\n<li><code class=\"language-text\">d</code>: delete</li>\n<li><code class=\"language-text\">v</code>: verbose</li>\n</ul>\n<h2>bzip2</h2>\n<p>If you receive a bzipped file, you can use bzip2 to decompress them in the current directory - which will result in a file named the same sans the bz2 extension.</p>\n<h1>[ET.7] Create and edit text files</h1>\n<p>Become familiar with vi and ed just in case you are dropped into an emergency\nshell.</p>\n<h1>[ET.8] Create, delete, copy, and move files and directories</h1>\n<p>You can reference ET.1 for some of the basic commands here.  Things to keep in\nmind:</p>\n<ul>\n<li><code class=\"language-text\">mv</code> has a backup command that is non-destructive.  Good for testing moves\nbefore making them part of a shell script.</li>\n<li><code class=\"language-text\">rm</code> has an iteractive mode -- good for checking that recursive deletes won't\nremove anything important</li>\n<li><code class=\"language-text\">rm</code> also has a -d flag which removes empty directories.</li>\n<li><code class=\"language-text\">touch</code> is the default command for creating files.  <code class=\"language-text\">mkdir</code> is the command for\ncreating directories.  You'll often use the -p option on <code class=\"language-text\">mkdir</code> to make a\nnested set of directories.</li>\n</ul>\n<h1>[ET.9] Create hard and soft links</h1>\n<p><code class=\"language-text\">ln</code> is the tool of choice to create links.  <code class=\"language-text\">ln -s</code> creates soft links and\nsimple <code class=\"language-text\">ln</code> creates hard links.  Hard links are essentially the same file so if\nyou delete one you'll delete the other.  Soft links are a reference so you can\ndelete the soft link without removing the target.</p>\n<p>I often get the order mixed up (TARGET vs LINK_NAME) for linking files:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">       ln - make links between files\n\nSYNOPSIS\n       ln [OPTION]... [-T] TARGET LINK_NAME\n       ln [OPTION]... TARGET\n       ln [OPTION]... TARGET... DIRECTORY\n       ln [OPTION]... -t DIRECTORY TARGET...\n\n       ln - make links between files</code></pre></div>\n<p>I fixed that problem by remembering that ln will create the link in the current directory if the link name is not specified.  That way you know that the link name is the 2nd argument.</p>\n<h1>[ET.10] List, set, and change standard ugo/rwx permissions</h1>\n<p>There are a lot of tricks to changing permissions that are much easier than remembering the octals (777, for example).  You can directly reference the target <code class=\"language-text\">ugo</code> for user, group, and other respectively and then use an operator along with the permission to be affected.</p>\n<p>For example, to give the group permissions to read and write, you can issue: <code class=\"language-text\">chmod g+rw</code>.</p>\n<p>Listing permissions is given by <code class=\"language-text\">ls -l</code>.</p>\n<h2>Sticky bit</h2>\n<p>Means that only the owner can delete the file.  Good for <code class=\"language-text\">/tmp</code> directories.</p>\n<h2>SUID/GUID</h2>\n<p>Simply means that when the file in question is executed it will be executed with the permissions of the owner.  Can be checked by looking at <code class=\"language-text\">ls</code> output and seeing the <code class=\"language-text\">s</code> bit set in place of execute.  If it's a capital <code class=\"language-text\">S</code> then the execute bit hasn't been set.</p>\n<h1>[ET.11] Locate, read, and use system documentation including man, info, and files in /usr/share/doc</h1>\n<p>For the exam, my goal is to generally avoid documentation where possible -- simply because I want to know the command well enough to go from memory.  That being said, you may blank of the order of options so I'd generally recommend to get bash-completion installed first and then go to the manpage.</p>\n<h2>Bash completion</h2>\n<p>Can be installed with <code class=\"language-text\">yum install bash-completion</code>.</p>\n<h2>Man pages</h2>\n<p>Man pages can be read with <code class=\"language-text\">man command</code>.  It's split into sections (see <code class=\"language-text\">man man</code>) and you'll probably only need to know sections 1 (executable programs), 5 (file formats), and 8 (system administration commands).</p>\n<h2>Info documents</h2>\n<p>Consider info documents a newer, more comprehensive version of man pages.\nTypically man pages will be enough to understand how to run the program but\nyou'll find that GNU utilities have a very well written info document.  Open\nthem with <code class=\"language-text\">info command</code>.</p>\n<h2>/usr/share/doc</h2>\n<p>Often the <code class=\"language-text\">/usr/share/doc</code> directory contains a lot more details and sample\nconfiguration files.  Keep that in mind if you need to start a service or define\na configuration and you don't know how to get started.  Use grep to find the\nservice/config name and work from there.</p>"}},{"node":{"id":"1b111764-1940-5262-a647-dc22f70d1a32","frontmatter":{"title":"Red Hat Certified System Administrator Exam Prep: Part 1: Overview","path":"/writing/redhat-csa-rhcsa-prep-p1","date":"20 August 2019","attract":"Part 1 of the RHCSA prep series.","commentary":false},"html":"<p><strong>Keywords: rhsca, preparation, exam, linux, system administrator</strong></p>\n<p>If you're here then you must be preparing for the <a href=\"https://www.redhat.com/en/services/training/ex200-red-hat-certified-system-administrator-rhcsa-exam\">Red Hat Certified System Administrator</a> exam.  These are the notes I took prior to taking the exam.  It consists of many parts and once complete I'll include links to every page.</p>\n<p>Please note that I haven't sat the exam yet so this document is a work in progress.</p>\n<p>In this part, we'll walk through what will be covered in the exam and then install Red Hat Linux using the Developer free license.</p>\n<h1>Exam overview</h1>\n<p>From the <a href=\"https://www.redhat.com/en/services/certification/rhcsa\">official documentation</a> you should be able to perform the following:</p>\n<ul>\n<li>Understand and use essential tools for handling files, directories, commandline environments, and documentation. <em>Essential tools</em></li>\n<li>Operate running systems including booting into different run levels, identifying processes, starting and stopping virtual machines, and controlling services. <em>Operating running systems</em></li>\n<li>Configure local storage using partitions and logical volumes. <em>Configure local storage</em></li>\n<li>Create and configure file systems and file system attributes, such as permissions, encryption, access control lists, and network file systems. <em>Create and configure file systems</em></li>\n<li>Deploy, configure, and maintain systems, including software installation, update and core services. <em>Deploy, configure, and maintain systems</em></li>\n<li>Understand and use basic networking concepts. <em>Manage basic networking</em></li>\n<li>Manage users and groups, including use of centralised directory for authentication. <em>Manage users and groups</em></li>\n<li>Manage security, including basic firewall and SELinux configuration. <em>Manage security</em></li>\n</ul>\n<p>I've given a code name to each one.  But first, let's set up a development environment.</p>\n<h1>In the wild</h1>\n<p>I didn't only want to take the exam to prove my Linux and system administrator chops; I also wanted to switch my career path from Product Management to System Adminstration, specifically in FinTech deployments.  So let's look at a few real job descriptions to see what we should add to the Task Requirements above.</p>\n<p>For a job in Amsterdam</p>\n<ul>\n<li>\n<p>Your technical knowledge and hands-on activities include solutions </p>\n<ul>\n<li>installation, implementation, and configuration of Linux environments</li>\n<li>configuration and layout of virtualisation solutions</li>\n<li>linking Linux environments to storage networks</li>\n</ul>\n</li>\n</ul>\n<p>For a job in the UK</p>\n<ul>\n<li>knowledge of Layer 2 and Layer 3 switches, including firewalls</li>\n<li>knowledge of RedHat administration</li>\n<li>knowledge of DHCP, DNS, TCP/IP, and other networking concepts</li>\n<li>experience of working with technologies such as Docker and Kubernetes within a containerised environment</li>\n</ul>\n<p>From this we can see that network fundamentals are very important outside of what's already listed in the RHCSA exam requirements.</p>\n<h1>Development environment</h1>\n<p>My preferred virtualisation solution is VMWare.  I'm sure these instructions also run on VirtualBox and Parallels, if on a Mac, and KVM in Linux.</p>\n<p>We'll get started by registering for a <a href=\"https://developers.redhat.com\">Red Hat Developer</a> account.  This gives us a free evaluation license to download the latest Red Hat version.</p>\n<p>Once you have signed up, you will also have an account at <a href=\"https://access.redhat.com/\">Red Hat Access</a>.  Navigate there and go to Products &#x26; Servies > Red Hat Enterprise Linux.  Click on \"Download version 8\" and download the Boot ISO: Red Hat Enterprise Linux 8.0 Boot ISO.  You will also need to download the DVD \"Red Hat Enterprise Linux 8.0 Binary DVD \" and make it accessible somewhere on a network share.</p>\n<p>Once you have the boot ISO downloaded, load it in your virtualisation product of choice and we can begin.</p>\n<h1>Installing Red Hat</h1>\n<p>Set up a virtual machine and boot the installer.  I created a simple VM with 2 cores, 2568MB of RAM, and 20GB root drive.</p>\n<p>Use the default settings.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9310ef9c9fd4f393eb0e5a8a9f7fdca2/af602/rhcsa-vm-installation-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.23684210526316%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACzElEQVQ4y52Uy27TUBCGqwrRFRLqpiBYUJKGRm2FWNSCNUrapgsWfSckVqyBB0CV2PAEVEg0QWkuTWInduK4cXzJzUnsXJv4eJhzICVAW1Uc6feRRzPfXDzywgKeqWM9GU7rz89ddzsej3OZTIYrlUoczwtcPp/nCoUCJ4oSpygKJ0kSl0omuaMvR1wsFuNSqdR2Op1+gb7BhV/n1vs3r7+++/AWPh4eTiVJJBhIdF0nlUqFqKpKqlWV3fS9WJQIz/MkkTghmWyGYMKpplUBk37/ibt7Zyly737s5dNn8OrggBi6Bo1GHep1E1VjajYbgCAol8tQq5lQVsqAcNQZlEpFIpdlOD1NJ5C2SJFLwUDg2O97DDu7u1PD0D1Zlr2CWPCwbQ9b9IrFoidKIruxeg8B6FPyEOxhwmm7bdGEJxfAza2t6FogAOFw2EUgYDBgO7QNwPZAEATABMyWzWYhl8sBL/DMhv5uv9/D6uU54OZmNBgMQiQSYUA6E5wbdQYTWzQMA6rMVsWWa+zdNE02mk6n7Q6HA8CK/wXu7++7dGaqWmGBs9PtdjGwA7SSS45LiPtXy3NAOvRGo4HBfebteR4MBkMGcxz7wjYTBeLBjyNdXaGmadBqWRfBtm2zCh3HuRJ4aYV7e7tshrRCy7KAYABVr9djunGFGxsbUb/fD6FQyDVNg+0X3TNCCAYRaDWbOMcOQp2bzTAQCERXV1dxbUKugcCmhR9gOILxZMrk9AfQaLXBardhPB7BaPRb4/HYnUzO6YLPA9e+PaLAUGii6RqpNrtEtxyitWwmw+qRYrVOVN0gpqET409NbLtL1yY+X2HC5/PRPWStOU4XbLyp40x0fvOiNuqLe8jGcnamZGfA2+vr6598Pn9tZycsCwKvFAp5JZ8XrlFeSSYTSjR6rORyWVkUxTr+cT7PgPSxjHqIevCforHLKysriz8AqU6CDa+YmbQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rhcsa vm installation 1\"\n        title=\"rhcsa vm installation 1\"\n        src=\"/static/9310ef9c9fd4f393eb0e5a8a9f7fdca2/dbb61/rhcsa-vm-installation-1.png\"\n        srcset=\"/static/9310ef9c9fd4f393eb0e5a8a9f7fdca2/19bd1/rhcsa-vm-installation-1.png 163w,\n/static/9310ef9c9fd4f393eb0e5a8a9f7fdca2/d3bcb/rhcsa-vm-installation-1.png 325w,\n/static/9310ef9c9fd4f393eb0e5a8a9f7fdca2/dbb61/rhcsa-vm-installation-1.png 650w,\n/static/9310ef9c9fd4f393eb0e5a8a9f7fdca2/6b691/rhcsa-vm-installation-1.png 975w,\n/static/9310ef9c9fd4f393eb0e5a8a9f7fdca2/91670/rhcsa-vm-installation-1.png 1300w,\n/static/9310ef9c9fd4f393eb0e5a8a9f7fdca2/af602/rhcsa-vm-installation-1.png 1824w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0bd14abd7fefcda82eb7cc3e1f605d88/a34ba/rhcsa-vm-installation-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.77659574468085%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACIElEQVQ4y5WTzW7TQBSF7RnHsZ22GSdyHKpQ1HbRBc9QXowHYNP2bVA2dNXAokkgQanyQyKRnw2tvAJZIrS+nBnbwZQmpSN9utd37hyP54w1DWMynuTHX0Zuf9AXo9FIDAYDMRwOxXQ6FYvFQsznc5XPZrN4vt8XvasrMf46FTfX12IymbjoKWjpuHhbf91q1KPGp8a33ude0Gq1gk6nE0BU0ev1ArwkgJiqN5vNoN1uBx8a74N35+c33W43xHMdUoYS9Mrls2e+Rx6o+lXyfV9RrVYV9/MUz/OoXC6reqVS+Qip1S5PAIGf4O6J/ErWXnLOY0Fd108Babq2RIxUHjetJdNzK3PQBKsdniaTSxCpHE3cyBHjxioyGYGus6z4bRI3C+qMk7UlyLS3yd52KWcVKO/sqBrPmf8niMKSG0bEc3In2BHnCp0xFTH30Of/KyjPUBbzlrV8fngY7e7v097REfm1GtUODmh3b49qqEkqcFcIQaVSSTmMtRt2yNjSKe5EBSwoiCIxFp+VnhoBGNP/AmseO0MdZyiF4CLOMcb4k0tDsjxmCjediOcd4qZNDKjc2kIsxJjOKsr5dYIn91x+CqngZVbwLCnepe7h1pNlWWSaJuXgukTmkjWXvZ0VfJMUv4NQYtt2iP81dF03LBaLCrgawt0w7Un4kay9gKCTXpsX4FiCx2O4q+I60t4Mr8BLzOU0fJr20CCitWwavwEPkXKXK9rc4AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rhcsa vm installation 2\"\n        title=\"rhcsa vm installation 2\"\n        src=\"/static/0bd14abd7fefcda82eb7cc3e1f605d88/dbb61/rhcsa-vm-installation-2.png\"\n        srcset=\"/static/0bd14abd7fefcda82eb7cc3e1f605d88/19bd1/rhcsa-vm-installation-2.png 163w,\n/static/0bd14abd7fefcda82eb7cc3e1f605d88/d3bcb/rhcsa-vm-installation-2.png 325w,\n/static/0bd14abd7fefcda82eb7cc3e1f605d88/dbb61/rhcsa-vm-installation-2.png 650w,\n/static/0bd14abd7fefcda82eb7cc3e1f605d88/6b691/rhcsa-vm-installation-2.png 975w,\n/static/0bd14abd7fefcda82eb7cc3e1f605d88/91670/rhcsa-vm-installation-2.png 1300w,\n/static/0bd14abd7fefcda82eb7cc3e1f605d88/a34ba/rhcsa-vm-installation-2.png 1504w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>You'll be prompted for the DVD location.  Enter it according to where you have it stored on your NFS share.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a4a9be221271390b995e733ee6b9622e/af602/rhcsa-vm-installation-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.1951754385965%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAADAElEQVQ4y52TS08TURTHJ8GYuIYBKjVVhES2+A1Y1IWbhrULYikhBhY2xbZgilASFjUSdn4HQWpiNOEhkR0iRBKB0oFOHzNtp51C6XtK7xzPveURIwbjTX65596Z+d/zP3Mut/lh/UYuFX6Uzad7tYpm0bSKBQAsp6enllqtdkGxULAcHx9bSqWSpYBxsVi8IJvN9lYqFbMgCDe5h6YHja9eOo+m3/jAO+mF6elpmJycBKfTCSMjI+BwOMDlcsG4ZxxGR0dhYmKCvTM1NXXBzMwMeL1exWw2t3G3OK7Z9Hg4ed/2Fu61t9fumkzEYDCQpqYmRktLC2ltbSU9PT1kdnaW+Hw+0t3dTTo6OkhnZyfp6uqq+V77YHBwUOI4zsg9e/qEX/j4SVn4vATv5ubI/Pt5fcG/oPv9fsbi0qK+uvpFX1v7qm9tbSGb+srKsr6E+8vLSzQmGxvfAGO5r6/PyNkdDl5JyEpcioIohogkSZBOpyCZTCBJSKVSuE4z6J6qqqBpGgPrCWpGJblcDmRZkj0ej5EbHh7iUUgJiSHY3d0hweA+5PN5wMIzsOhnc51SqQjlcplBn52cnJBqVYNIJCLb7c+NnNP5gheEoCKGRQgKQYIPIJs9ZmQyKihKkmWsqmm2phnS+BzcI4VCHsJhUUYtIzcwMMBLUkzB1gD89YTOhBCgA9uEnsysU8uZTIaJ1ufM+QGEOhDFM8H+fiuP/hWoD6ak6zpboB3AwyCeiLNMFUW5giTBPqT1l91u19WC54MKhkKHEItFIYmCNNNrBW02G7NMBdAuwRsC1WqVxmj5iL7IsqS1u7R8yR+W7XY7j1koWFQ4OBCIcBCEw0MB4yDWT0TCQFupLqj+VfDipwwNDfH4USIelyEajdTQHpHlGPZjjOAeSSTi13FKhTGpmNvtZoLNWMNsuVxirZLLnWDtsv8MLUulUqZO0mNjY3c4q9XauLPz8/v+fkAOBPbCSOR3AtewF8bLEN/e/rGO5TPgfeYaEB5pQ27/J21nGg2/AJ+ryAvmtCKoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rhcsa vm installation 3\"\n        title=\"rhcsa vm installation 3\"\n        src=\"/static/a4a9be221271390b995e733ee6b9622e/dbb61/rhcsa-vm-installation-3.png\"\n        srcset=\"/static/a4a9be221271390b995e733ee6b9622e/19bd1/rhcsa-vm-installation-3.png 163w,\n/static/a4a9be221271390b995e733ee6b9622e/d3bcb/rhcsa-vm-installation-3.png 325w,\n/static/a4a9be221271390b995e733ee6b9622e/dbb61/rhcsa-vm-installation-3.png 650w,\n/static/a4a9be221271390b995e733ee6b9622e/6b691/rhcsa-vm-installation-3.png 975w,\n/static/a4a9be221271390b995e733ee6b9622e/91670/rhcsa-vm-installation-3.png 1300w,\n/static/a4a9be221271390b995e733ee6b9622e/af602/rhcsa-vm-installation-3.png 1824w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Everything else should have automatically been configured.  I selected [Base Environment]: Server and [Add-ons for Selected Environment]: File and Storage server.  Go ahead and begin the installation.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e98739b5441df728146a93016dd08abd/af602/rhcsa-vm-installation-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.41447368421053%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAADXElEQVQ4y5VUS08bVxQeJV1GkYvTsGhAoEAMEriLVl1nkVWsbKEgDOusqm6QVRxQHlhKIqTuyIZUbZUf0CRNmzZVEyVG8QPbw4xnPB7Pe/wCGxUFlQW+Pj3nEioiJYuO9OneOfee73znMSNkHzw/ud95c/EAOlf2/9m/rChKxDSMiCzJkWKxGBFFMZLL5SIbGxuR1OtUZHNzk5/R+haXEVdKpdLF1Xv3PhK+/OJSYPmbq9Vby0uwtnYfdF2HilEBtaQCEoKBe8/zwDQNkCQJVFUFTdP4PYKmlfg5EnqJROITQTh9Knjp46D7+YUQTM3MdFzX6aJz17atroGrX/W7rdY2t/m+393Z2ek6eIfueZ5La0ev6CDLkn3n9u1e4WzwTE9obMw919cHk5OTbHt7q1uv1ziazUa30ajzPTnTSufH7YgOBgTLMu14PN4r9ODzWTjsDg0NwdTUV8w0TSgqRSiXy4CXAR0BFYGM6VPa9E72atXnJXEcm+3u/g2YkR2LxZAwGOwJh8fd4eFhiEaj7MWL55BcT/I6oRJot1uQyaTh2Z/PABuGqclYMxcqmObDhz+DJEtMwbpmshk7sXyrVwhywjAnnJ2dZcWiDARqDKbBFZEyspn4XqlUAOsGtVqVN0wra4wUYwA7vrDwLuHc3BwTxQLk8jmKzEEqVVWBdVSNTcLOlnkAspNSVMwoqO+59vz8/CHh+Pj4W4VRJkmbnIjqaDs2rxc5YzP4urXV5CCyQiFPwRgFKogF+8aN64dNOVI4PT3NsMhciWEYmLIFvu9x0uMgRUQo4lzKisoqpgV5UbRvEiEpHMOxGRgY4GNDI0BKjnDU1eMgu4uB8+kkWJrEGq4Ojl6044tLvUIgEOgJhUJuf38/J6R03qfoaF9DtLabIGsGxH54CSt/Ndh3r3Zg5XfLXk3E/iN0+vqIcOIACalrHwQSstZWg0m6w75+kGfXfvEOlp424OYj3fpx5VtOGBwZGWlSytHoDOztvQEa1A+B5tKvVmG33YSc04bF3zy4+7IN1x9r9Z/uLnDCwOjo6Prg4GBtYmLCLpVUB78ADkV5FzhSTjabcdLplLORTTt/vEo7a09S1v1fU/XvnySTdxbnzwj4nEDgX0I4h/j0/+IC4jz69h9ynPwX7buF9sIAkKwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rhcsa vm installation 4\"\n        title=\"rhcsa vm installation 4\"\n        src=\"/static/e98739b5441df728146a93016dd08abd/dbb61/rhcsa-vm-installation-4.png\"\n        srcset=\"/static/e98739b5441df728146a93016dd08abd/19bd1/rhcsa-vm-installation-4.png 163w,\n/static/e98739b5441df728146a93016dd08abd/d3bcb/rhcsa-vm-installation-4.png 325w,\n/static/e98739b5441df728146a93016dd08abd/dbb61/rhcsa-vm-installation-4.png 650w,\n/static/e98739b5441df728146a93016dd08abd/6b691/rhcsa-vm-installation-4.png 975w,\n/static/e98739b5441df728146a93016dd08abd/91670/rhcsa-vm-installation-4.png 1300w,\n/static/e98739b5441df728146a93016dd08abd/af602/rhcsa-vm-installation-4.png 1824w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>You'll have the opportunitity to creata a user account and root password.  Make sure the user account is an administrator.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/860754c1d09277e4b9f116e284a2d5cd/af602/rhcsa-vm-installation-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.41447368421053%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACz0lEQVQ4y52UPUwTYRiAL+JoTG1RBmkDCbSQEBw0zgy6cGG0BSmLo5MkLkJJHEz9GZ1kwcHExclENxeNOpTQ//auXO/vu7/+QCkgIqF3r+93LVVCROMlT7627/s9fd/73jtm7fXHnh/23kQL7Kn97/uTHMexsiyzhUKBTafTbCqVQtJsMplkE4kEm8vl3BhdO0wiU6VSaeLF8vJZ5vq1m574/F3jUfwhrKy8BKEsgCAIwPM8qKoChBDQNAKyJEEunwOO56C0XmrnISgCXddovvY4Hr/IMOfP+W5c8JGrwRDcnou2CFGdslh2ZFlyrIrpVKsVp16vOZIkOrquO41Gw1Exh+YRjdC1RcX5fE559vRJH3PJ1+sNjY2Rfr8fIpGIvbFRdyUUyzK7GIaOq+XKaaxSsY5o4R7AApSlpVgf48Xryvg4GRoagunpabtWqwIKuuAGQAHQ3+ln0zSOxRG72dyit0dZWHiAQp/PO47CYDAIs7Ozx4RUQNd1Yd29d6IoQgXlv2Ju3N7aaoCiyChc6GN8HeHw8DDMzUVPCLFVSK6tQj6XhWw2DZoqQ712JDVPF0ajJ4WmaUKmwAMnSFAqI7IGktaV/VlIW/5daCK1quVujjz/BLdeEbjzxoTJFQL33xJo1C0354SQHspRhTMzMx2h1a1Qxwo/ZAm8S+nwHqHrZ86A6mkVjuHYDAwM4NiE7SpWZdGTRGhb9Pv2ZgV2N60uzQ08efyzzqG5wvYpo9Dj8XhDoRAJBAIQDoftLC/CapaDRKYIGb4MRZFAXlCPU1ahgIgKAUPXbJxNkKSyshhb7ApVvz9AKzzEsbANw2hjno7Z5pAONrYsu3OIQt/IyEiVtoxjA3vfdmF7uwk7lJ2/Q9s9OPhBn2crFou5Qs/o6OjXwcFBE1tWeJ5T8W3iUiz+EzLHFa1MJv1lfv5eL4PXGQTfEkw/cvk/6e84en4C4tORjb5KOlMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rhcsa vm installation 5\"\n        title=\"rhcsa vm installation 5\"\n        src=\"/static/860754c1d09277e4b9f116e284a2d5cd/dbb61/rhcsa-vm-installation-5.png\"\n        srcset=\"/static/860754c1d09277e4b9f116e284a2d5cd/19bd1/rhcsa-vm-installation-5.png 163w,\n/static/860754c1d09277e4b9f116e284a2d5cd/d3bcb/rhcsa-vm-installation-5.png 325w,\n/static/860754c1d09277e4b9f116e284a2d5cd/dbb61/rhcsa-vm-installation-5.png 650w,\n/static/860754c1d09277e4b9f116e284a2d5cd/6b691/rhcsa-vm-installation-5.png 975w,\n/static/860754c1d09277e4b9f116e284a2d5cd/91670/rhcsa-vm-installation-5.png 1300w,\n/static/860754c1d09277e4b9f116e284a2d5cd/af602/rhcsa-vm-installation-5.png 1824w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e67fb90763766d46e6c8fd4b6ee5746a/af602/rhcsa-vm-installation-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.23684210526316%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACr0lEQVQ4y52S3U/TUBTACTHyZGJ4MER9YDIKc6AxBqJBeTDZYB8PJvwZJv4bJr74Lq9GDRqIJr6LUSZhHVvJ1q2fW7d+3HYbwjAhrJfjve2GG6AxNvn1nHNP+rvnth0YIBc+2J04dJ17RxjP5HK5WVEUPdLptA/LenH98/osS3KO42az2WyXGVLf53k+NNC5Liw/f/bl5fILeLOy0ub5AhZEARMhFoQSliTRQxAEnGFZzO1wuFgsEngvElFb12tQKpU2fd3lS0OxkZHvj27fgcdLS0QkQIEvAF/kwTB0sCwTbBsBkYOiKmCYBkiSBLIiezXdjOa5XJYltkGqHAoxzEZw7AYsLC62ieDYcexjIjmmuWmaXjQMw1tvNpteDyHLxzLbzWYDyCDpE+HU9HRqnGEgGo263alMMslpaI9yat09OGiBosg9wqmpVCgUgng83ifsxkqlDKqqglbV+nqd3G219kGWpX7h5GQIksnkGSGtFUWBaq0GmqaB7djQaNR7NzxfSCdMJBJnjkzzKpnMpHJS1+t1gvNvwmTyfCGdsKbrUCNTWggBIvS+wz8KY7GYa1kGOLYFiP4uyKdOjknXKLRGvVim+9P7KD3CcDicCgaDEIlE3HxRAEEpQ7mqg6rVPJRK9SRXq36kfZ+au7u3B4Io/hYyDJMKBAIQiUZcKhNUjVABsaxBXpAhWyhCNl8Ejhc8tvM8bGxlIJXehhSbc79yEnxa3+wTfguMjpIJo0eWZWPbqWOEHIzsDqgfC9lYNyzsIIQLqnn09KMOT15zW71CdowcORFfgH1HglZD8WNd/jsNGX7YIsAhgrKY2ekKL05OMO/HxkNWbD4s62/vqmhtTjVXH6rW6hyhE9fmO/kDH1r7a7Lz7haqvLr5oSukt2HCdcK1/4Q+O3zlamDwF3gUZMKlvFxJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rhcsa vm installation 6\"\n        title=\"rhcsa vm installation 6\"\n        src=\"/static/e67fb90763766d46e6c8fd4b6ee5746a/dbb61/rhcsa-vm-installation-6.png\"\n        srcset=\"/static/e67fb90763766d46e6c8fd4b6ee5746a/19bd1/rhcsa-vm-installation-6.png 163w,\n/static/e67fb90763766d46e6c8fd4b6ee5746a/d3bcb/rhcsa-vm-installation-6.png 325w,\n/static/e67fb90763766d46e6c8fd4b6ee5746a/dbb61/rhcsa-vm-installation-6.png 650w,\n/static/e67fb90763766d46e6c8fd4b6ee5746a/6b691/rhcsa-vm-installation-6.png 975w,\n/static/e67fb90763766d46e6c8fd4b6ee5746a/91670/rhcsa-vm-installation-6.png 1300w,\n/static/e67fb90763766d46e6c8fd4b6ee5746a/af602/rhcsa-vm-installation-6.png 1824w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Once the installation is complete, make a clone of the image as you'll need to create more of them later on in the exam preparation process.  Write down the user name you created as well as the password because you'll be referencing these frequently.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a8cc471480e86e951659723ac47fca1/af602/rhcsa-vm-installation-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.95394736842105%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA00lEQVQ4y+3OzQqCQBAH8NWDYHjq7NWTogdPUcSqIPVALfRMXTp2Mgvxg9bep0ynWbFLFKF0CTr8mFl25s+Q/Xajp8mOFfzEzmXJSpQkCcuyjKVp2taiKNjxcGRxHLd9nufPVpzzdRRFOplOJuF8PgPqUfAoBYpc1wXbtsFxnLZalgWmabZE/4qYMwwjJJqm+ao6qhVFqQghV1T1JHYuCJBPJEkKZFkWj+YdnPmkRiCycJ4EXfojFHoSO3XX/wO/FOg/fTQD3H7rwjFaoGVXhxL74zuaYhKNuAzaPQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rhcsa vm installation 7\"\n        title=\"rhcsa vm installation 7\"\n        src=\"/static/6a8cc471480e86e951659723ac47fca1/dbb61/rhcsa-vm-installation-7.png\"\n        srcset=\"/static/6a8cc471480e86e951659723ac47fca1/19bd1/rhcsa-vm-installation-7.png 163w,\n/static/6a8cc471480e86e951659723ac47fca1/d3bcb/rhcsa-vm-installation-7.png 325w,\n/static/6a8cc471480e86e951659723ac47fca1/dbb61/rhcsa-vm-installation-7.png 650w,\n/static/6a8cc471480e86e951659723ac47fca1/6b691/rhcsa-vm-installation-7.png 975w,\n/static/6a8cc471480e86e951659723ac47fca1/91670/rhcsa-vm-installation-7.png 1300w,\n/static/6a8cc471480e86e951659723ac47fca1/af602/rhcsa-vm-installation-7.png 1824w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>And now we're all logged in.  Part 2 will cover using essential system tools.</p>"}},{"node":{"id":"3ab61214-b6e7-5c5a-baf1-0d8cbf4567c6","frontmatter":{"title":"Next steps after getting your Macbook Pro keyboard repaired","path":"/writing/macbook-pro-keyboard-recovery","date":"16 August 2019","attract":"Follow these steps to avoid heartache when you get your MBP back.","commentary":false},"html":"<p><strong>Keywords: macbook pro; keyboard repair; service programme; unshaky</strong></p>\n<p>So you just got your Macbook Pro back from the service centre after having it\nrepaired for repeating keys?  Here are the steps I followed to avoid this\nproblem again.</p>\n<h1>Precautions</h1>\n<p>First, I immediately purchased the following:</p>\n<ul>\n<li>Silicone keyboard cover for the Macbook Pro <a href=\"https://www.ebay.com/itm/143357622678\">example on ebay</a></li>\n<li>USB-C socket cover <a href=\"https://www.ebay.com/itm/302850677303\">example on ebay</a></li>\n<li>2x compressed air can</li>\n</ul>\n<p>Once these arrived, I placed the USB-C covers in the sockets on the side of the\ncomputer.  This should prevent dust from building up in sockets.</p>\n<p>I gave the keyboard a thorough spray with the compressed air and, after confirming\nthere's no lint on the keyboard cover, placed it on top of my keys.</p>\n<p>Second, I installed the <a href=\"https://github.com/aahung/Unshaky/\">Unshaky</a> app\navailable on GitHub.  I did see some open issues with this version so consider\nstarting from v0.5.3 if you use the US keyboard layout.  Remember which keys\ncaused you problems before and immediately set them to a 40ms delay.  This\nshould cover up the issue if it appears without you even knowing.</p>\n<p>I was a bit wary about installing this app and giving it accessibility access so\nI forked the repository, restored it to commit\n<code class=\"language-text\">be5d0d93e9ced97ee508a6d27db3ae0f5974d181^</code> (note the caret means commit prior\nto this one), and built my own version.  This commit was before auto-update was\nadded.</p>\n<p>Finally, when plugging in the power supply at the wall end I made sure it was\ngrounded to prevent sparks from occuring at the USB-C port and damaging the\nlogic board.</p>\n<h1>Preventative care</h1>\n<p>You'll want to spray down your keys weekly to make sure there's no dust inside.\n(At least that is what Apple tells us.)  Give the silicone cover a good spray as\nwell when you do so.</p>\n<p>While I'm grateful for the free <a href=\"https://support.apple.com/keyboard-service-program-for-mac-notebooks\">keyboard service\nprogram</a>,\nit's the first time I've ever had a problem with a computer keyboard.  Can you\nimagine buying an Amiga and having problems with the keyboard?  I hope that when\nApple returns to the scissor-switches that they provide that option as a repair\nfor affected customers.</p>\n<p>Once the keyboard service program expires - which I believe is four years after\nthe purchase date - I'll sell this laptop and pick up the latest Lenovo T3XXX\nseries.  By that time hopefully we'll have 6 core CPUs with hyperthreading, 90Hz\ndisplays, at least 2K resolution as standard, with a 90 WHr battery.</p>\n<p>Have you found other ways to prevent the keys repeating?  Let me know on\nTwitter <a href=\"https://twitter.com/plktio\">@plktio</a>.</p>"}},{"node":{"id":"eb6cd4be-3c08-5f0d-8f99-c4581dbcf667","frontmatter":{"title":"Upgrading to Debian 10 Buster from Debian 9 Stretch","path":"/writing/upgrading-to-debian-stretch","date":"16 August 2019","attract":"A simple step by step.","commentary":false},"html":"<p>Debian 10: Buster was released on July.  Let's upgrade to the latest version.</p>\n<p>Check your current version with: <code class=\"language-text\">hostnamectl</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ hostnamectl\n   Static hostname: baytrail\n         Icon name: computer-desktop\n           Chassis: desktop\n        Machine ID: 6535c38e46164760b537c1f1f792c734\n           Boot ID: b53c54cceb0b473e8fec1243e0929c68\n  Operating System: Debian GNU/Linux 9 (stretch)\n            Kernel: Linux 4.9.0-8-amd64\n      Architecture: x86-64</code></pre></div>\n<p>Next, decide how you're going to back up the system.  I opted for LVM snapshots\nbut unfortunately I didn't have enough space.  I resized my home logical volume\nto create more space.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ lvs\n  LV          VG          Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert\n  home        baytrail-vg -wi-ao----  33.56g                                                    \n  root        baytrail-vg -wi-ao----  17.71g                                                    \n  swap_1      baytrail-vg -wi-ao----   3.89g                                                    </code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># lsof /home\n\n# umount /home\n\n# e2fsck -f /dev/mapper/baytrail--vg-home \ne2fsck 1.43.4 (31-Jan-2017)\nPass 1: Checking inodes, blocks, and sizes\nInode 1177663 extent tree (at level 1) could be narrower.  Fix&lt;y&gt;? yes\n\nPass 1E: Optimizing extent trees\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n\n/dev/mapper/baytrail--vg-home: ***** FILE SYSTEM WAS MODIFIED *****\n/dev/mapper/baytrail--vg-home: 103209/2199344 files (0.8% non-contiguous), 2709830/8797184 blocks\n\n# lvreduce --resizefs -L 27G /dev/mapper/baytrail--vg-home \nfsck from util-linux 2.29.2\n/dev/mapper/baytrail--vg-home: clean, 103209/2199344 files, 2709830/8797184 blocks\nresize2fs 1.43.4 (31-Jan-2017)\nResizing the filesystem on /dev/mapper/baytrail--vg-home to 7077888 (4k) blocks.\nThe filesystem on /dev/mapper/baytrail--vg-home is now 7077888 (4k) blocks long.\n\n  Size of logical volume baytrail-vg/home changed from 33.56 GiB (8591 extents) to 27.00 GiB (6912 extents).\n  Logical volume baytrail-vg/home successfully resized.\n\n# mount /home\n\n# lvcreate -L 5G -s -n stretch-backup /dev/mapper/baytrail--vg-root \n  Using default stripesize 64.00 KiB.\n  Logical volume &quot;stretch-backup&quot; created.</code></pre></div>\n<p>Now we can start installing Debian Buster.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># apt update\n# apt upgrade\n# apt dist-upgrade</code></pre></div>\n<p>Check for any errors.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># dpkg -C\n# apt-mark showhold</code></pre></div>\n<p>Update your package repositories by changing all occurences of <code class=\"language-text\">stretch</code> to\n<code class=\"language-text\">buster</code> in <code class=\"language-text\">/etc/apt/sources.list</code>.</p>\n<p>Finally, run the apt update/upgrade/dist-upgrade commands again and you should\nbe all set.</p>\n<p>Reboot and test the new system.  If there are no errors, you can remove the\nsnapshot.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># lvremove /dev/mapper/baytrail--vg-stretch--backup</code></pre></div>"}},{"node":{"id":"53050ecb-5353-5051-9b70-c10894d4ad00","frontmatter":{"title":"Vanity GPG keys","path":"/writing/vanity-gpg-keys","date":"10 August 2019","attract":"How I generate GPG keys with a specific SHA2 hash.","commentary":false},"html":"<p><em>Keywords: gpg, vanity, keypair, nist</em></p>\n<p>Referencing the very useful <a href=\"https://www.gnupg.org/documentation/manuals/gnupg/Unattended-GPG-key-generation.html\">GPG unattended key generation\nguide</a>,\nI wanted to see how easy it would be to generate a key with a specific hash.</p>\n<p>For my initial test, I wanted to make it as simple as possible only using the\ndefault settings.</p>\n<p>Let's start by building the structure of the looping key generation.</p>\n<p>We'll pipe an incrementing counter to sha256sum to calculate the hash.  Using\ngrep, we'll search for a specific vanity key in the last 2 hexadecimal\ncharacters.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#!/bin/bash\n\ni=&quot;0&quot;\nvanity_key=&quot;99&quot;\n\nwhile true; do\n  TIME=`date +%H:%M:%S`\n  if echo -n &quot;$i&quot; | sha256sum --tag | grep -iqE &quot;$vanity_key\\$&quot;; then\n    echo $i\n    break\n  fi\n\n  i=$[$i+1]\ndone</code></pre></div>\n<p>This outputs 109. </p>\n<p>Now that the looping logic works, we'll start writing the key generation\nportion. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">%echo Generating key...\n%no-protection\nKey-Type: default\nSubkey-Type: default\nName-Real: Test User\nName-Email: test.user@domain.tld\nExpire-Date: 0\n%commit\n%echo Key generation complete :)</code></pre></div>\n<p>Unfortunately, this took 34 minutes.  We'll add %transient-key to reduce the\nentropy requirements with the caveat that any key generated this way can't\nactually be used.  Perhaps at a later stage I can use the true random number\ngenerator present on my Nitrokey.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">%echo Generating key...\n%transient-key\n%no-protection\nKey-Type: default\nSubkey-Type: default\nName-Real: Test User\nName-Email: test.user@domain.tld\nExpire-Date: 0\n%commit\n%echo Key generation complete :)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ time GNUPGHOME=&quot;$(mktemp -d)&quot; gpg --batch --generate-key key_gen\ngpg: keybox &#39;/tmp/tmp.jccfyYaR2R/pubring.kbx&#39; created\ngpg: Generating key...\ngpg: /tmp/tmp.jccfyYaR2R/trustdb.gpg: trustdb created\ngpg: key 7467B1A5706D1A65 marked as ultimately trusted\ngpg: directory &#39;/tmp/tmp.jccfyYaR2R/openpgp-revocs.d&#39; created\ngpg: revocation certificate stored as &#39;/tmp/tmp.jccfyYaR2R/openpgp-revocs.d/EB64E5588879FF739C00DF767467B1A5706D1A65.rev&#39;\ngpg: Key generation complete :)\n\nreal    0m0.434s\nuser    0m0.002s\nsys     0m0.007s</code></pre></div>\n<p>This is much faster.</p>\n<p>Now we can work on parsing the output from gpg.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#!/bin/bash\n\nvanity_key=&quot;99&quot;\n\nwhile true; do\n  TIME=`date +%H:%M:%S`\n  TEMP=$(mktemp -d)\n  GNUPGHOME=$TEMP gpg --batch --quiet --generate-key key_gen\n\tKEY_FINGERPRINT=$(GNUPGHOME=$TEMP gpg --batch --quiet --list-keys --with-colons | grep fpr | head -n1)\n\tif echo -n $KEY_FINGERPRINT | grep -iEq &quot;$vanity_key:\\$&quot;; then \n\t\tGNUPGHOME=$TEMP gpg --list-keys\n\t\tbreak\n\tfi\n\techo Deleting...\n\trm -r $TEMP\ndone</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gpg: Generating key...\ngpg: key 1EB473A3ADC44699 marked as ultimately trusted\ngpg: Key generation complete :)\n/tmp/tmp.h6wYHFfIu6/pubring.kbx\n-------------------------------\npub   rsa2048 2019-08-10 [SC]\n      2B6692A4EB91FB47AFA87F681EB473A3ADC44699\nuid           [ultimate] Test User &lt;test.user@domain.tld&gt;\nsub   rsa2048 2019-08-10 [E]\n\n\nreal    5m5.063s\nuser    0m4.333s\nsys     0m11.511s</code></pre></div>\n<p>This took five minutes to generate a 2048-bit RSA key that ends in 99 with\nreduced randomness.  Note that it could take longer or shorter depending on the\nlength of the vanity key.</p>\n<p>This is a running on a single CPU core with a benchmark score (<code class=\"language-text\">sysbench --test=cpu run</code>): 1567.26 events per second.</p>\n<p>Next, we'll try to run these scripts so that they use all the cores.</p>\n<p>We'll make a wrapper script that runs these scripts across all available 4 cores.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#!/bin/bash\n./file.sh &amp; \n./file.sh &amp;\n./file.sh &amp; \n./file.sh &amp;\n\nwait\necho &quot;Done.&quot;</code></pre></div>\n<p>And we'll add a check in each loop that searches for a specific file that's\ncreated upon a match.  This will stop all the scripts.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#!/bin/bash\n\nvanity_key=&quot;99&quot;\nSTOPLOCK=&quot;match-found&quot;\n\nwhile true; do\n  if [[ -f &quot;$STOPLOCK&quot; ]]; then\n\t\tbreak\n\tfi\n  TIME=`date +%H:%M:%S`\n  TEMP=$(mktemp -d)\n  GNUPGHOME=$TEMP gpg --batch --quiet --generate-key key_gen\n\tKEY_FINGERPRINT=$(GNUPGHOME=$TEMP gpg --batch --quiet --list-keys --with-colons | grep fpr | head -n1)\n\tif echo -n $KEY_FINGERPRINT | grep -iEq &quot;$vanity_key:\\$&quot;; then \n\t\tGNUPGHOME=$TEMP gpg --list-keys\n\t\ttouch $STOPLOCK\n\t\tbreak\n\tfi\n\techo Deleting...\n\trm -r $TEMP\ndone</code></pre></div>\n<p>Timing the run of the new parallel script gives us:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">real    0m5.852s\nuser    0m0.334s\nsys     0m0.579s</code></pre></div>\n<p>Again, this value depends on the random values used.  Now, let's update the vanity number to be something more difficult to find.  We'll use \"999\".</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gpg: Key generation complete :)\n/tmp/tmp.I03FUioXup/pubring.kbx\n-------------------------------\npub   rsa2048 2019-08-10 [SC]\n      D1BED2A845408097BD06081F1D10BEB494695999\nuid           [ultimate] Test User &lt;test.user@domain.tld&gt;\nsub   rsa2048 2019-08-10 [E]\n\n[..snip from other processes..]\n\nreal    5m11.555s\nuser    0m17.176s\nsys     0m31.377s</code></pre></div>\n<p>This took a much longer.  One of the limiting factors for doing this for an\nactual key is the available entropy.  Once we remove the %transient-key option\nfrom the key generation file, we'll find this could take days or even months to\nfinish.</p>\n<p>In other post, I'll explore ways to increase entropy so we can generate secure vanity keys.</p>"}},{"node":{"id":"2baddd32-f547-58dd-b63a-dbec98b9081d","frontmatter":{"title":"(WIP) SystemD quick reference","path":"/writing/systemd-qreference","date":"09 August 2019","attract":"A walkthrough of the commands I use most frequently with SystemD.","commentary":false},"html":"<p><em>Keywords: systemd, reference, linux, terminal</em></p>\n<p><em>This is a work in progress document.</em></p>\n<p>I have embraced systemd on all my Linux systems, including Gentoo, which offers\nOpenRC as an alternative.  Here are the commands I use most frequently to manage\nmy boxes.</p>\n<h1>systemctl</h1>\n<p>Systemctl is used to control systemd and the service manager.  I most frequently\nuse it to enable services for newly installed packages, set services to start on\nboot, and configure local services to run in the user space.</p>\n<p>To view the current state of the service manage, you can just type <code class=\"language-text\">systemctl</code>\nas root.  The results are often given in a pager.</p>\n<p>You'll see a variety of unit types in a variety of states.</p>\n<ul>\n<li>Unit types: service, socket, target, device, mount, automount, timer, swap,\npath, slice, and scope </li>\n<li>States: load, sub, and active</li>\n</ul>\n<h1>Journalctl</h1>\n<p>Journalctl is used to query the contents of the systemd journal.  I frequently\nuse it to monitor local processes I scheduled as a user -- for example,\nofflineimap.</p>\n<p>To view recent messages you can run: <code class=\"language-text\">journalctl --user --since &quot;1 hour ago&quot;</code></p>"}},{"node":{"id":"bfc5f50e-1b25-5a19-88c2-e436d88695cd","frontmatter":{"title":"Binaural Waves","path":"/app/binaural-waves","date":"01 August 2019","attract":"Download my Binaural Waves app today.","commentary":false},"html":"<p>An app I've been working on for the past year is now live on the iOS App Store.\nIntroducing <em>Binaural Waves</em>, an app to help you focus and relax with smooth\nsound tones.  Use this app when you need to hunker down and get things done or\nwhen you need to chill out.</p>\n<p>This is the first release and I have a lot planned over the coming months.</p>\n<p><a href=\"https://apps.apple.com/us/app/binaural-waves/id1459988902\">Download here</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 330px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/705f4f2cf544fa0f2abd35e69df6a7fb/b53ef/binaural-waves-icon.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAC4jAAAuIwF4pT92AAACCUlEQVQ4y42UPU8bQRCGZ+3zma8qinFAXCQnCoWtFEaiIrQQgrAl2rQoQQoCCZsiVVAsEiHbFBSBJoWRY1PEDQ1KG/G/3sxqZ++Wyx2meLTvfO7snGwiIqShlCHNTiE5kMmkFz0US2yYzZpzdpawvGxsjdbF4v2csQ1t4tYWod8nnJwQej2D1oMBoV5/sOn/zrU1wnBImJ42drlMqFSi+NUVYX19zIR22YeHhNtbQqdjbN+PkrXe3SXc3RFGI0Kjcb82bGgdepKzM6P39qIn2Y8wMUGoVgntNmFjw6xA27GmtkDh+JjQ7dqAkiQlBSrUtZpCEBB2dgitlskJv7wVetF68QcH5ktOTRn/zAyhUIim0I3cFVxcELa3nZfYhs1mgFLJkwkI+/uLrJ/y+QKXl3NcPIelpRKurwtYXX0VNg0CD0dHgftsJcFzZjEc3fff8w7/IJer8bkAzxux75TjHvL5LufUpcFLqQ3XkxNjk/mByNbMO/oJ44vOMgvMZ+Yn8078GX36iKb8wnxgnjM151blNM44+pT5Fvf7TsJr5jvzlukwVWbSmYrkBZ9Et6WG3Ev9mKPB/Gb+Mh+ZvHOh1fqyG6YZbxaf0KJ38suxy0xFtJ54KDtP/OnFG9qn1ZkB02J6wlemL7H4PkNUgtM2LTJvxNasMM9iOY/8g025/RExGveXrlJ0Mv8ACjnWtg8gOyUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"binaural waves icon\"\n        title=\"binaural waves icon\"\n        src=\"/static/705f4f2cf544fa0f2abd35e69df6a7fb/b53ef/binaural-waves-icon.png\"\n        srcset=\"/static/705f4f2cf544fa0f2abd35e69df6a7fb/19bd1/binaural-waves-icon.png 163w,\n/static/705f4f2cf544fa0f2abd35e69df6a7fb/d3bcb/binaural-waves-icon.png 325w,\n/static/705f4f2cf544fa0f2abd35e69df6a7fb/b53ef/binaural-waves-icon.png 330w\"\n        sizes=\"(max-width: 330px) 100vw, 330px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 506px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dfd69d30b7f47d7cdceafe64763d3241/26532/binaural-waves-app-screenshot.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 202.76679841897237%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAApCAYAAAA1bQl+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAFHElEQVRIx+1WWU9bRxTmH1VVoy4UkpA00L72pYuqKGqrUilp01S0D91UlSRFIaGBhuKwxFi2oSwhYGzseGEzYIzxQmyzGRtDsNkJkICXa/vrzNhjTIGmidq3jPT5zNx75jvnzMwdf1kgLRaLIRqNQhAEZp8FkUgEiUQC8XicUiGLk3m9XphMJiwvLzPiUCiEcDh8KPi7zc1NOBwOKBQK1meEdDJ9ubOzg+3tbeZMo2YS0PFh4PM2Njawu7vLssziZdJMuRPPgC8Df8afcz9q+Vw6ZoR0QNN99OgRMht9/vjxY6ytraXXhzYeIDNLHpARUietTodfioshl8txu7oaUpkUFRUVUKpUuHbtGiorKyGRSCASVWFmZoZNDJESw+FQChmE9GdzfR3zs7MIzM9jZmoKs2TSnM+HjdVVrCwtsQ3zkbF/bg5bZJ3jZFejQgxCjCOOSKr0LLoGjuBDWJYCGF1agG0lCOtygMEUmMfU2nK63DnPBGZcDnicNnhc9qR12jE9ZsW815Pc5Ug4gsbxMfzaq8XV+50o6VajWN2BKxoFrpv7ofJNIREVWAaD6ntoE1ehueYWOqQ1uHunCgpZLdrrRXgwbNwjbPOMQ+qfgsw3AdnsJLNy3yTqib0/O012KE5KFDBKgo31qmHrVsFqUDJr6+mCWXMPzpHBJCEtud5kRNmAAbfMRpQPduN3Ux/KjQZUTzig8U4xQiEmQNUkhapRDE2zFLq7chjaGqAnMKnb9hOKCWFpnw43B3tQPtSL3wa6cZOgjBCrpsdBto8tvrpFRgjvMBiVzbDoOjBCYNHSDAf2SlZ4J9C04EHLw2k0p0D7DfOT0Ps96ZIt3XrYKXoMpGQdRvVaZs0aFR6Yh/cy/NNgQqWiB7dVfRApKXpZv6LdAJXJnj7Q5uEGDJtqCOpIvw7DBCNmMYYGRXC79KkMyWn/pKQJx85eQc5npcgpLCP2Bo5/XoaXz5bgu+ou5hgVIugyvIf6pmw0d+ZB1noSLco8yO/moaH9VVjGLnPCMD4tbUXOxRq89c0dnC4iIPbMt2K8fkGE72uShDSwfuBDaPpPQWssgLo3H7qBAtJ/B129ORixX97L8FyxBNnnb+H0pdvIu1jFcIqAEv5Qq2GOYeLXqX0fHboTUBrOQKE7A1V3PpT6ArRrs2FxXEkRkjU893MtXvu4hJR5HbmFpThxvhz5RbXI/rIaP9YlCSPRCFoVH0DanAtZy2lS8ilmFbq3oe7LJYRXk4T0w/7ociOOXahBzqU6vPlVErlfi/FSoQhFfyjSGWr734Vu6A3oh04QHCf94zCYTkJjfAUm6097F6yy3w6JaghyzTBk6iRoX9w5iB7LePo6c0/ewwO3DM7xhgw0Yswlgc+f+vQy77qjGv3P+DctfX3FyMGNxQ8HD0hJE4kYuboOgj6nFcTjiSQhzyA56RD807vU3Hgq+AHCZ20vCF8Q/h+Ez4OnEv4nGR4W9bkIuZzLJBZS0u5pyjWzn5ZzlGBxcREulwtutxsupxOry0HmeJSC/btG3NraYsIzrQ/pgGrETaIRF1fW4QluE8LIkeqVK9dM4rScoyUzRyKIyL8vrAsxfKEk/XgYu0y17qlXLpepdPb7/UyQ8iD7CFkZ5KFAslrdDmFyZYdkKBx5TKieXieakmbJ13Cf4MzMgDpT8iUiNC0WC2w2WxpWqxV2u53JZ5oE9c3U3jRYFt9ymikHHT958gSBQADBYPAAKAFd+8w5/Pj8BfuCv3/eCBXbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"binaural waves app screenshot\"\n        title=\"binaural waves app screenshot\"\n        src=\"/static/dfd69d30b7f47d7cdceafe64763d3241/26532/binaural-waves-app-screenshot.png\"\n        srcset=\"/static/dfd69d30b7f47d7cdceafe64763d3241/19bd1/binaural-waves-app-screenshot.png 163w,\n/static/dfd69d30b7f47d7cdceafe64763d3241/d3bcb/binaural-waves-app-screenshot.png 325w,\n/static/dfd69d30b7f47d7cdceafe64763d3241/26532/binaural-waves-app-screenshot.png 506w\"\n        sizes=\"(max-width: 506px) 100vw, 506px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>"}},{"node":{"id":"7fa61eb0-cec7-527a-88cd-df60b9a9cada","frontmatter":{"title":"Configuring and integrating Nitrokey into your workflow","path":"/writing/integrating-nitrokey","date":"30 July 2019","attract":"A quick guide on the venerable Nitrokey.","commentary":false},"html":"<p><em>Keywords: ssh-agent, gpg-agent, pcsc, nitrokey</em></p>\n<p>I recently collected a new <a href=\"https://www.nitrokey.com/\">Nitrokey Pro</a>.  This post\nexplains how I configured it and integrated it into my authentication flow.</p>\n<h1>Before connecting the Nitrokey</h1>\n<p>The Nitrokey supports the OpenPGP standard so you'll be mainly interacting with\nit using GPG. On Gentoo Linux, you'll need gnupg with the +smartcard and +usb USE flags\nenabled.</p>\n<p><code class=\"language-text\"># echo &quot;app-crypt/gnupg smartcard usb&quot; &gt;&gt; /etc/portage/package.use/gnupg</code></p>\n<p>Next, we'll install the required packages.</p>\n<p><code class=\"language-text\">$ sudo emerge -av sys-apps/pcsc-tools sys-apps/pcsc-lite dev-libs/opensc \\\napp-crypt/ccid app-crypt/gnupg</code></p>\n<p>The abstractions work like the following: gnupg -> pcsc-lite -> opensc -> ccid\n-> nitrokey.</p>\n<h1>Connecting the Nitrokey</h1>\n<p>Here's the immediate output from <code class=\"language-text\">dmesg</code> after connecting the Nitrokey.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[24798.012187] usb 2-2.2: new full-speed USB device number 5 using uhci_hcd\n[24798.450042] usb 2-2.2: New USB device found, idVendor=20a0, idProduct=4108,\nbcdDevice= 1.01\n[24798.450044] usb 2-2.2: New USB device strings: Mfr=1, Product=2,\nSerialNumber=3\n[24798.450046] usb 2-2.2: Product: Nitrokey Pro\n[24798.450047] usb 2-2.2: Manufacturer: Nitrokey\n[24798.450048] usb 2-2.2: SerialNumber: 0000000000000000000086BE\n[24798.467777] hid-generic 0003:20A0:4108.0002: hiddev96,hidraw1: USB HID v1.10\nDevice [Nitrokey Nitrokey Pro] on usb-0000:02:00.0-2.2/input0</code></pre></div>\n<p>Let's see if pcsc supports the smart card.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ sudo pcscd -a -d -f\n[..snip..]\n00005549 /var/tmp/portage/sys-apps/pcsc-lite-1.8.24/work/pcsc-lite-1.8.24/src/eventhandler.c:289:EHStatusHandlerThread()\npowerState: POWER_STATE_POWERED\n[..snip..]</code></pre></div>\n<p>This looks good; the card was recognised.  Next, we'll start the service and let it run on boot.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ sudo systemctl start pcscd.service pcscd.socket\n$ sudo systemctl enable pcscd.service pcscd.socket</code></pre></div>\n<p>The services should now be loaded in systemctl memory and running.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ systemctl list-units --type=service,socket --state=running pcsc*\nUNIT          LOAD   ACTIVE SUB     DESCRIPTION\npcscd.service loaded active running PC/SC Smart Card Daemon\npcscd.socket  loaded active running PC/SC Smart Card Daemon Activation Socket</code></pre></div>\n<p>Finally, we'll confirm that gpg can see the card as well.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ gpg --card-status\nReader ...........: Nitrokey Nitrokey Pro (0000000000000000000086BE) 00 00\nApplication ID ...: D2760001240103030005000086BE0000\nVersion ..........: 3.3\nManufacturer .....: ZeitControl\nSerial number ....: 000086BE\nName of cardholder: [not set]\nLanguage prefs ...: de\nSex ..............: unspecified\nURL of public key : [not set]\nLogin data .......: [not set]\nSignature PIN ....: forced\nKey attributes ...: rsa2048 rsa2048 rsa2048\nMax. PIN lengths .: 64 64 64\nPIN retry counter : 3 0 3\nSignature counter : 0\nKDF setting ......: on\nSignature key ....: [none]\nEncryption key....: [none]\nAuthentication key: [none]\nGeneral key info..: [none]</code></pre></div>\n<p>And gpg looks good too.</p>\n<h1>Keypair configuration</h1>\n<p>According to the Nitrokey\n<a href=\"https://www.nitrokey.com/files/doc/Nitrokey_Pro_factsheet.pdf\">datasheet</a> it\nsupports RSA-2048 up to RSA-4096 and ECC-256 up to ECC-512 (Brainpool and NIST\nalgorithms).  For compatibility reasons, it's probably best to use RSA-2048\nkeypairs despite them being slower and larger than equivalent ECC keypairs.\nIn this tutorial I show RSA-2048.  For my personal key, I'll use ECC which is\nnot shown in this tutorial.</p>\n<ul>\n<li>According to Microsoft Research, ECC (elliptical curve\ncryptography) keypairs are <a href=\"https://eprint.iacr.org/2017/598.pdf\">easier to\ncrack</a> than RSA keypairs with a\nsufficiently powerful quantum computer.  </li>\n<li>The algorithms supported by the Nitrokey are supposedly vunerable to\nside-channel attacks due to not implementing a Montogomery power ladder.</li>\n<li>ECC is used for Bitcoin, just secp256k1 which is not supported\nby the Nitrokey.</li>\n<li>The kernel.org\n<a href=\"https://www.kernel.org/doc/html/latest/process/maintainer-pgp-guide.html\">guidelines</a>\nsay nistp256 is suitable.</li>\n</ul>\n<p>We'll be creating:</p>\n<ul>\n<li>All keys: RSA-2048, expiring yearly on 1 August, SHA-2 series output digest</li>\n<li>Primary key: certify and signing\n** Subkey 1: (encryption)\n** Subkey (authentication)</li>\n<li>Revocation certificate stored offsite</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ gpg --full-generate-key --expert\ngpg (GnuPG) 2.2.15; Copyright (C) 2019 Free Software Foundation, Inc.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nPlease select what kind of key you want:\n   (1) RSA and RSA (default)\n   (2) DSA and Elgamal\n   (3) DSA (sign only)\n   (4) RSA (sign only)\n   (7) DSA (set your own capabilities)\n   (8) RSA (set your own capabilities)\n   (9) ECC and ECC\n  (10) ECC (sign only)\n  (11) ECC (set your own capabilities)\n  (13) Existing key\nYour selection? 1\nRSA keys may be between 1024 and 4096 bits long.\nWhat keysize do you want? (2048)\nRequested keysize is 2048 bits\nRSA keys may be between 1024 and 4096 bits long.\nWhat keysize do you want for the subkey? (2048)\nRequested keysize is 2048 bits\nPlease specify how long the key should be valid.\n         0 = key does not expire\n      &lt;n&gt;  = key expires in n days\n      &lt;n&gt;w = key expires in n weeks\n      &lt;n&gt;m = key expires in n months\n      &lt;n&gt;y = key expires in n years\nKey is valid for? (0) 358\nKey expires at Sat 01 Aug 2020 20:33:09 BST\nIs this correct? (y/N) y\n\nGnuPG needs to construct a user ID to identify your key.\n\nReal name: Antony Jepson\nEmail address: a@plkt.io\nComment: RSA key for Antony Jepson.  Renewed every 1 August.\nYou selected this USER-ID:\n    &quot;Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;&quot;\n\nChange (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\ngpg: /home/bnt/.gnupg/trustdb.gpg: trustdb created\ngpg: key 718044D8003D317A marked as ultimately trusted\ngpg: directory &#39;/home/bnt/.gnupg/openpgp-revocs.d&#39; created\ngpg: revocation certificate stored as &#39;/home/bnt/.gnupg/openpgp-revocs.d/0F8D4AD674DB570DB095CB3F718044D8003D317A.rev&#39;\npublic and secret key created and signed.\n\npub   rsa2048 2019-08-09 [SC] [expires: 2020-08-01]\n      0F8D4AD674DB570DB095CB3F718044D8003D317A\nuid                      Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;\nsub   rsa2048 2019-08-09 [E] [expires: 2020-08-01]\n\n$ gpg --edit-key --expert a@plkt.io\ngpg (GnuPG) 2.2.15; Copyright (C) 2019 Free Software Foundation, Inc.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nSecret key is available.\n\ngpg: checking the trustdb\ngpg: marginals needed: 3  completes needed: 1  trust model: pgp\ngpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u\ngpg: next trustdb check due at 2020-08-01\nsec  rsa2048/718044D8003D317A\n     created: 2019-08-09  expires: 2020-08-01  usage: SC\n     trust: ultimate      validity: ultimate\nssb  rsa2048/692971AD1D29742D\n     created: 2019-08-09  expires: 2020-08-01  usage: E\n[ultimate] (1). Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;\n\ngpg&gt; addkey\nPlease select what kind of key you want:\n   (3) DSA (sign only)\n   (4) RSA (sign only)\n   (5) Elgamal (encrypt only)\n   (6) RSA (encrypt only)\n   (7) DSA (set your own capabilities)\n   (8) RSA (set your own capabilities)\n  (10) ECC (sign only)\n  (11) ECC (set your own capabilities)\n  (12) ECC (encrypt only)\n  (13) Existing key\nYour selection? 8\n\nPossible actions for a RSA key: Sign Encrypt Authenticate\nCurrent allowed actions: Sign Encrypt\n\n   (S) Toggle the sign capability\n   (E) Toggle the encrypt capability\n   (A) Toggle the authenticate capability\n   (Q) Finished\n\nYour selection? A\n\nPossible actions for a RSA key: Sign Encrypt Authenticate\nCurrent allowed actions: Sign Encrypt Authenticate\n\n   (S) Toggle the sign capability\n   (E) Toggle the encrypt capability\n   (A) Toggle the authenticate capability\n   (Q) Finished\n\nYour selection? S\n\nPossible actions for a RSA key: Sign Encrypt Authenticate\nCurrent allowed actions: Encrypt Authenticate\n\n   (S) Toggle the sign capability\n   (E) Toggle the encrypt capability\n   (A) Toggle the authenticate capability\n   (Q) Finished\n\nYour selection? E\n\nPossible actions for a RSA key: Sign Encrypt Authenticate\nCurrent allowed actions: Authenticate\n\n   (S) Toggle the sign capability\n   (E) Toggle the encrypt capability\n   (A) Toggle the authenticate capability\n   (Q) Finished\n\nYour selection? q\nRSA keys may be between 1024 and 4096 bits long.\nWhat keysize do you want? (2048)\nRequested keysize is 2048 bits\nPlease specify how long the key should be valid.\n         0 = key does not expire\n      &lt;n&gt;  = key expires in n days\n      &lt;n&gt;w = key expires in n weeks\n      &lt;n&gt;m = key expires in n months\n      &lt;n&gt;y = key expires in n years\nKey is valid for? (0) 358\nKey expires at Sat 01 Aug 2020 20:37:48 BST\nIs this correct? (y/N) y\nReally create? (y/N) y\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\n\nsec  rsa2048/718044D8003D317A\n     created: 2019-08-09  expires: 2020-08-01  usage: SC\n     trust: ultimate      validity: ultimate\nssb  rsa2048/692971AD1D29742D\n     created: 2019-08-09  expires: 2020-08-01  usage: E\nssb  rsa2048/73CCBEF81E3522EB\n     created: 2019-08-09  expires: 2020-08-01  usage: A\n[ultimate] (1). Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;\n\ngpg&gt; quit\nSave changes? (y/N) y</code></pre></div>\n<p>Now, back up your key and save it somewhere safe.  We do this now because once\nthey keys are copied to your Nitrokey they are deleted.</p>\n<p><code class=\"language-text\">$ gpg --export-secret-keys a@plkt.io &gt; sec-key.asc</code></p>\n<p>Next, we'll copy the keys to the Nitrokey.  First the signature key, then the\nencryption key, then the authentication key (for SSH).</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ gpg --edit-key --expert a@plkt.io\ngpg (GnuPG) 2.2.15; Copyright (C) 2019 Free Software Foundation, Inc.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nSecret key is available.\n\nsec  rsa2048/718044D8003D317A\n     created: 2019-08-09  expires: 2020-08-01  usage: SC\n     trust: ultimate      validity: ultimate\nssb  rsa2048/692971AD1D29742D\n     created: 2019-08-09  expires: 2020-08-01  usage: E\nssb  rsa2048/73CCBEF81E3522EB\n     created: 2019-08-09  expires: 2020-08-01  usage: A\n[ultimate] (1). Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;\n\ngpg&gt; keytocard\nReally move the primary key? (y/N) y\nPlease select where to store the key:\n   (1) Signature key\n   (3) Authentication key\nYour selection? 1\n\nsec  rsa2048/718044D8003D317A\n     created: 2019-08-09  expires: 2020-08-01  usage: SC\n     trust: ultimate      validity: ultimate\nssb  rsa2048/692971AD1D29742D\n     created: 2019-08-09  expires: 2020-08-01  usage: E\nssb  rsa2048/73CCBEF81E3522EB\n     created: 2019-08-09  expires: 2020-08-01  usage: A\n[ultimate] (1). Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;\n\ngpg&gt; key 1\n\nsec  rsa2048/718044D8003D317A\n     created: 2019-08-09  expires: 2020-08-01  usage: SC\n     trust: ultimate      validity: ultimate\nssb* rsa2048/692971AD1D29742D\n     created: 2019-08-09  expires: 2020-08-01  usage: E\nssb  rsa2048/73CCBEF81E3522EB\n     created: 2019-08-09  expires: 2020-08-01  usage: A\n[ultimate] (1). Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;\n\ngpg&gt; keytocard\nPlease select where to store the key:\n   (2) Encryption key\nYour selection? 2\n\nsec  rsa2048/718044D8003D317A\n     created: 2019-08-09  expires: 2020-08-01  usage: SC\n     trust: ultimate      validity: ultimate\nssb* rsa2048/692971AD1D29742D\n     created: 2019-08-09  expires: 2020-08-01  usage: E\nssb  rsa2048/73CCBEF81E3522EB\n     created: 2019-08-09  expires: 2020-08-01  usage: A\n[ultimate] (1). Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;\n\ngpg&gt; key 2\n\nsec  rsa2048/718044D8003D317A\n     created: 2019-08-09  expires: 2020-08-01  usage: SC\n     trust: ultimate      validity: ultimate\nssb* rsa2048/692971AD1D29742D\n     created: 2019-08-09  expires: 2020-08-01  usage: E\nssb* rsa2048/73CCBEF81E3522EB\n     created: 2019-08-09  expires: 2020-08-01  usage: A\n[ultimate] (1). Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;\n\ngpg&gt; key 1\n\nsec  rsa2048/718044D8003D317A\n     created: 2019-08-09  expires: 2020-08-01  usage: SC\n     trust: ultimate      validity: ultimate\nssb  rsa2048/692971AD1D29742D\n     created: 2019-08-09  expires: 2020-08-01  usage: E\nssb* rsa2048/73CCBEF81E3522EB\n     created: 2019-08-09  expires: 2020-08-01  usage: A\n[ultimate] (1). Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;\n\ngpg&gt; keytocard\nPlease select where to store the key:\n   (3) Authentication key\nYour selection? 3\n\nsec  rsa2048/718044D8003D317A\n     created: 2019-08-09  expires: 2020-08-01  usage: SC\n     trust: ultimate      validity: ultimate\nssb  rsa2048/692971AD1D29742D\n     created: 2019-08-09  expires: 2020-08-01  usage: E\nssb* rsa2048/73CCBEF81E3522EB\n     created: 2019-08-09  expires: 2020-08-01  usage: A\n[ultimate] (1). Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;\n\ngpg&gt; quit\nSave changes? (y/N) y</code></pre></div>\n<p>The public key can be exported and stored in any easily retrievable place.</p>\n<p><code class=\"language-text\">$ gpg --armor --export a@plkt.io &gt; pubkey.asc</code></p>\n<p>Here's the final state of the Nitrokey.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ gpg --card-edit\n\nReader ...........: Nitrokey Nitrokey Pro (0000000000000000000086BE) 00 00\nApplication ID ...: D2760001240103030005000086BE0000\nVersion ..........: 3.3\nManufacturer .....: ZeitControl\nSerial number ....: 000086BE\nName of cardholder: [not set]\nLanguage prefs ...: de\nSex ..............: unspecified\nURL of public key : [not set]\nLogin data .......: [not set]\nSignature PIN ....: forced\nKey attributes ...: rsa2048 rsa2048 rsa2048\nMax. PIN lengths .: 64 64 64\nPIN retry counter : 3 0 3\nSignature counter : 0\nKDF setting ......: on\nSignature key ....: 0F8D 4AD6 74DB 570D B095  CB3F 7180 44D8 003D 317A\n      created ....: 2019-08-09 19:34:03\nEncryption key....: FECA 217D E1E5 96AA A7F5  86F1 6929 71AD 1D29 742D\n      created ....: 2019-08-09 19:34:03\nAuthentication key: D6CF ED7E FA74 999D 2E99  AEE4 73CC BEF8 1E35 22EB\n      created ....: 2019-08-09 19:36:50\nGeneral key info..:\npub  rsa2048/718044D8003D317A 2019-08-09 Antony Jepson (RSA key for Antony Jepson.  Renewed every 1 August.) &lt;a@plkt.io&gt;\nsec&gt;  rsa2048/718044D8003D317A  created: 2019-08-09  expires: 2020-08-01\n                                card-no: 0005 000086BE\nssb&gt;  rsa2048/692971AD1D29742D  created: 2019-08-09  expires: 2020-08-01\n                                card-no: 0005 000086BE\nssb&gt;  rsa2048/73CCBEF81E3522EB  created: 2019-08-09  expires: 2020-08-01\n                                card-no: 0005 000086BE\n\ngpg/card&gt; quit</code></pre></div>\n<p>More information available on Nitrokey's website (guide)[https://www.nitrokey.com/documentation/openpgp-create-backup].</p>\n<p>The keys shown in this example are just for reference.  My actual public key is stored at <strong><a href=\"https://plkt.io/key\">https://plkt.io/key</a></strong>.</p>\n<h1>Using the keypair</h1>\n<p>So I think for most people this is the stopping point -- people don't actually\nintegrate it into their flow.  Here's the references I used for integrating it\ninto my daily flow. </p>\n<h2>Signing code commits</h2>\n<p>GitHub has a <a href=\"https://help.github.com/en/articles/signing-commits\">great guide</a>.</p>\n<p>In the local repository, issue <code class=\"language-text\">git config commit.gpgsign true</code>.  Then when you\ncommit, add the S flag: <code class=\"language-text\">git commit -S -m commit message</code>.</p>\n<h2>Encrypting and signing email</h2>\n<p>I use a mixture of Outlook and Mutt for email.  I use Outlook for day-to-day\nemail and Mutt for mailing lists and important emails.  See the Mutt\n<a href=\"https://gitlab.com/muttmua/mutt/wikis/MuttGuide/UseGPG\">documentation</a> for\nhelp.</p>\n<h2>Logging into remote systems</h2>\n<p>Two helpful guides: <a href=\"https://wiki.archlinux.org/index.php/GnuPG#SSH_agent\">Arch\nWiki</a> and the top Google\nresult <a href=\"https://eklitzke.org/using-gpg-agent-effectively\">Using gpg-agent\neffectively</a>.</p>\n<h2>Encrypting files</h2>\n<p>Use the official <a href=\"https://www.gnupg.org/gph/en/manual/x110.html\">GPG\ndocumentation</a>.</p>\n<h1>Summary</h1>\n<p>Using public keys with a smart card wasn't as difficult as expected.  I think\nyou need to incrementally introduce it into your habits over time.  Start by\noccasionally sending encrypted email -- see how people respond.  Attach the\ndigest to the email instead of including it inline.</p>\n<p>Let me know if you found any issues with the instructions above.</p>"}},{"node":{"id":"d8985aed-9503-5c32-973e-d062e5eb7449","frontmatter":{"title":"(WIP) My development environment","path":"/writing/my-development-environment","date":"23 July 2019","attract":"How do I get my work done?","commentary":false},"html":"<p><strong>This post is a work in progress.</strong></p>\n<p>My development environment has changed over the years in terms of hardware but I\nconstantly find myself returning to the same tools over and over again.</p>\n<p>Some of my staples:</p>\n<ul>\n<li>Vim</li>\n<li>Screen</li>\n</ul>\n<p>I think now is the best time to write about this as any - virtualisation is\nmainstream and hardware is a commodity.  I've managed to become completely\nhardware independent and can easily work from a low-end Lenovo laptop to\nhigh-end Apple hardware with little compromise.</p>\n<p>I'll walk you through my set up and how I quickly replicate it across platforms.\nI'll also cover how I back up my configuration across the cloud and local\nstorage.</p>\n<p>This will be an evolving post as I add more details.</p>\n<h1>Basics</h1>\n<p>All my work is inherently dependent on virtual machines running upon a trusted\noperating system.  For local virtual machines I use VMWare Workstation or Fusion\nand for remote virtual machines, I typically use AWS for heavy work loads and\nHertzner for lighter ones.</p>\n<h2>Local virtualisation</h2>\n<p>Gentoo 17.1 serves as the foundation for my Linux-based investigations and work.</p>"}},{"node":{"id":"b79ca9f4-e76b-596e-af18-1c2052eac3f8","frontmatter":{"title":"Regenerative mental techniques","path":"/writing/regenerative-mental-techniques","date":"21 July 2019","attract":"My thoughts on keeping the mental edge when working.","commentary":false},"html":"<p>I think this is a question that plagues nearly everyone: \"How do I maintain that mental edge when working?\"</p>\n<p>It's a difficult thing to answer and ultimately everyone will have slightly different takes on what works for them.  The below is my framework for staying focused on deeply technical topics.</p>\n<h3>Mindset</h3>\n<p>I think it's incredibly important to <strong>reduce the number of decisions you make\ndaily</strong>.  I've noticed that on days where I have to make many little decisions\nI find myself too drained to think deeply.  You can achieve this through many\nmeans, here are some examples:</p>\n<ul>\n<li>Prepare your clothes for the following day before you sleep.  This reduces\nsome morning anxiety if you need to enter a workplace.</li>\n<li>Following on from the above, establish a morning routine that defines how\nyou'll exercise, what you'll eat, and your route of transportation.</li>\n<li>Try to reduce your eating frequency - I've found that eating twice a day or\neven once a day seems to improve mental clarity throughout the day.</li>\n<li>Accept failure and accept mistakes.  Problems are a part of life but they\nrarely pull you away from well-defined goals.  Accept them.</li>\n</ul>\n<h3>Activities</h3>\n<p>Beyond setting the stage for a good, clear mind.  There are some activities you\ncan do to get unstuck when you can't seem to make headway.</p>\n<ul>\n<li><strong>Go for a walk</strong>.  I can't stress this enough - going for a walk, even for\nonly 5 minutes is the quickest and most reliable way I've found to unblock the\nmind.  Quell your worry by telling yourself it's only a 2 minute walk.  After\nyou step outside you'll likely walk for longer.  Don't be afraid to do\nmultiple loops.</li>\n<li>Read some fiction.  Immersing yourself in an alternate reality for a while can\nlet you stash some of your mental blockers.  Really focus on imagining what\nthe author wrote to make use of your left brain faculties.</li>\n</ul>\n<h3>Work</h3>\n<p>There are several patterns you can implement at work to help free your mind of\nunnecessary churning.</p>\n<ul>\n<li>Schedule times during the day to handle email.  Most email doesn't need to\nbe answered immediately.  This means not opening the mail app at all because\neven subject-line snooping will be enough to occupy your mind.</li>\n<li>Establish a protocol at work for urgent messages.  Let people know that\nurgent requests should include an expected response time and should ideally\nbe formatted in a y/n format so you can reply quickly.  </li>\n<li>Delegate where possible to people you trust.  Empower people to make\ndecisions on your behalf.</li>\n<li>Reduce \"get-started\" anxiety by letting people jump start their own ideas\nin a form light of requirements.  This is called MVP by some, MVC by others,\nbut empower people to propose things without worrying about having to\ndefine a completed product.</li>\n<li>When you leave the office, imagine yourself placing all your troubles into a\nbag or a container and dropping it at the entrance.  Know that you can\ncollect them the following day.  Really imagine the load being reduced as\nyou physically drop them.</li>\n</ul>\n<p>Do you have other techniques for keeping your mind fresh throughout the day?\nLet me know!</p>"}},{"node":{"id":"8444a6a1-2099-5d4f-a129-913bc8c0788d","frontmatter":{"title":"Getting back up to speed with Linu","path":"/writing/wp-speed-linux","date":"19 July 2019","attract":"On returning to using Linux every day.","commentary":false},"html":"<p>I've been using Linux as my full-time personal OS for the past few\nmonths. It's a hit of nostalgia. However, I haven't really had time to\nconfigure it in detail. After a few hours walking down memory lane, I\nfinally have things configured how I like. Here's what I changed.</p>\n<h3>Terminal</h3>\n<p>I switched from gnome-terminal (Ubuntu default) to rxvt-unicode. Doing\nso required tweaking a lot of defaults in ~/.Xresources. I specified\nthe Zenburn theme as the default as it works all times of day. I also\npicked a large font for my 1980x1080 resolution so I don't strain my\neyes. Funnily enough, this simple configuration is very similar to a lot\nof the paid for apps on the iOS App Store that let you write with little\ndistractions.</p>\n<p>xlsfont can be used to list available fonts to place in your\n~/.Xresources. Alternatively, you can use the \"xft:\" specification to\nreference TrueType fonts with their human readable name.</p>\n<h3>Window manager</h3>\n<p>For the window manager, I migrated my entire workflow back to the\nlight-weight work-horse that is dwm. Dwm has been my favourite window\nmanager since I first bootstrapped a Gentoo installation back in 2008\n(see my old blog on Wordpress to read more about it).</p>\n<p>However, this wasn't without some difficulties as Ubuntu does provide a\nfull-fledged experience through Unity. I had to install/configure the\nfollowing programs to bring me back up to speed.</p>\n<ul>\n<li>Backlight. I installed xbacklight to configure the backlight.\nIncarnation is \"xbacklight -set %\". I can later update this to use\nthe Xorg XF86 keys so that Function+Arrow_Up =\nBrightness_Increment as it does on Ubuntu.</li>\n<li>Battery. To monitor battery I use the script I wrote below.\n<code class=\"language-text\">#!/bin/sh  while true; do   battery=cpi -b | awk &#39;{print $4}&#39; | sed &#39;s/,//&#39;  uptime=ptime -p  xsetroot -name &quot;$battery | $uptime&quot;   sleep 5s done</code></li>\n<li>Wifi. I patched dwm with the dwm systray patch available on\nsuckless.org and then added nm-applet (default network manager that\ncomes with Ubuntu) to my start up script. This way I still get a\nfully featured network manager that doesn't load all of Gnome.</li>\n<li>Loading apps. I use dmenu which is a standard part of the\nsuckless-utils.</li>\n</ul>\n<p>All in all, switching back to <a href=\"https://dwm.suckless.org/\">dwm</a> has improved my productivity by a\nnoticeable amount as I spend less time managing windows and more time\nwriting content.</p>"}},{"node":{"id":"8310e203-813b-59f8-af7b-aa386fd0eb3a","frontmatter":{"title":"Future of computing","path":"/writing/future-of-computing","date":"19 July 2019","attract":"Our future will be a multi-device commonality.","commentary":false},"html":"<p><strong>In Progress Stream of Consciousness Writing</strong></p>\n<p>I believe that the future of computing is multi-device.</p>\n<p>By that I mean that each of us will be acutely aware of our compute capacity per device.  When we need to do something extraneous or beyond our natural capacity -- e.g. calculate our tax due, render our social image posts with filters in a decentralised manner, or send messages in other languages with real time translation, we'll need to use our phone, laptop, and other devices together to make the best impact.</p>\n<p>This will likely consist of multiple devices scanning the same QR code and using their compute power (across architectures: ARM, AMD, X86, X64) to do distributed, private, compute.</p>\n<p>More thoughts to come soon.  Let me know if you agree with this.</p>"}},{"node":{"id":"fc642318-0597-5e68-b79d-58395ce825b4","frontmatter":{"title":"Links","path":"/links","date":"14 July 2019","attract":"Share the enjoyment I've had on things I've watched, read, or listened to recently.","commentary":null},"html":"<p>Here is a continuously growing list of things I've found interesting to watch,\nread, or listen.  This page will grow over time, so keep an eye on the update\ndate.  Let me know if you enjoyed any of these or have anything interesting to\nshare.</p>\n<h3>August</h3>\n<ul>\n<li><a href=\"https://googleprojectzero.blogspot.com/2019/08/down-rabbit-hole.html\">Down the\nrabbit-hole</a>\n<code class=\"language-text\">2019</code>: Google's security researcher Tavis Ormandy walks through how the\nseemingly innocuous can be a source of new research opportunities.</li>\n</ul>\n<h3>July</h3>\n<ul>\n<li><a href=\"https://people.kernel.org/monsieuricon/patches-carved-into-developer-sigchains\">Patches carved into developer\nsigchains</a>\n<code class=\"language-text\">2019</code>: Konstantin Ryabitsev walks through a fascinating example of a\nhypothetical decentralised sneakernet that runs on secure scuttlebutt.</li>\n<li><a href=\"https://danluu.com/deconstruct-files/\">Files are fraught with peril</a> <code class=\"language-text\">2019</code>:\nA very thorough look at the why Dropbox only supported ext4 for a while and\nthe difficulties of file creation.</li>\n<li><a href=\"https://www.ibm.com/cloud/learn/knative\">IBM Knative: A Complete Guide</a>\n<code class=\"language-text\">April 2019</code>: This written guide has been essential for me to quickly\nunderstand a lot of the Knative concepts and how they integrate into a\nKubernetes system.</li>\n</ul>"}},{"node":{"id":"bbb0bf4e-2422-52e6-8bcf-40b3863d55bc","frontmatter":{"title":"Details of the Cloudflare outage on July 2, 2019","path":"/commentary/cloudflare-outage-july-2019","date":"13 July 2019","attract":null,"commentary":true},"html":"<p>From John Graham-Cumming's post on Cloudflare's <a href=\"https://blog.cloudflare.com/details-of-the-cloudflare-outage-on-july-2-2019/\">blog</a>,</p>\n<blockquote>\n<p>On July 2, we deployed a new rule in our WAF Managed Rules that caused CPUs to become exhausted on every CPU core that handles HTTP/HTTPS traffic on the Cloudflare network worldwide.</p>\n</blockquote>\n<p> A very well written summary that actually acts as a pretty good advertisement for Cloudflare.</p>"}},{"node":{"id":"7671f13e-4db4-5a60-b3ca-ff6796622e4a","frontmatter":{"title":"Adding a new disk to an existing RAID on Linux","path":"/writing/adding-disk-to-md-array","date":"26 June 2019","attract":"It's very easy if you're using RAID-1.","commentary":null},"html":"<p>I run a small <a href=\"https://www.samba.org/\">Samba</a> server at home that I use to store high-fidelity music and photos.  Right now it's based upon a RAID 1 mirrored pair which means I can only withstand a single disk failure before losing my data.</p>\n<p>I recently picked up another <a href=\"https://www.wd.com/products/portable-storage/wd-elements-portable.html\">Western Digital Elements</a> drive and wanted to document how I added it to the array using <a href=\"https://raid.wiki.kernel.org/index.php/Linux_Raid\"><code class=\"language-text\">mdadm</code></a>, software used to manage Linux software RAID arrays.</p>\n<p>First, you'll want to inspect your current configuration carefully  especially if you have an encrypted LUKS setup.  It's easy to forget what in what order you created the array!</p>\n<p>After making sure all drives are plugged in, we'll take a look at our current block devices.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># lsblk</span>\nNAME                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nloop0                     <span class=\"token number\">7</span>:0    <span class=\"token number\">0</span> <span class=\"token number\">16</span>.2M  <span class=\"token number\">1</span> loop /snap/node/2028\nloop1                     <span class=\"token number\">7</span>:1    <span class=\"token number\">0</span> <span class=\"token number\">88</span>.4M  <span class=\"token number\">0</span> loop /snap/core/6964\nsda                       <span class=\"token number\">8</span>:0    <span class=\"token number\">0</span> <span class=\"token number\">55</span>.9G  <span class=\"token number\">0</span> disk \nâ”œâ”€sda1                    <span class=\"token number\">8</span>:1    <span class=\"token number\">0</span>  512M  <span class=\"token number\">0</span> part /boot/efi\nâ”œâ”€sda2                    <span class=\"token number\">8</span>:2    <span class=\"token number\">0</span>  244M  <span class=\"token number\">0</span> part /boot\nâ””â”€sda3                    <span class=\"token number\">8</span>:3    <span class=\"token number\">0</span> <span class=\"token number\">55</span>.2G  <span class=\"token number\">0</span> part \n  â”œâ”€vg-root   <span class=\"token number\">254</span>:0    <span class=\"token number\">0</span> <span class=\"token number\">17</span>.7G  <span class=\"token number\">0</span> lvm  /\n  â”œâ”€vg-swap   <span class=\"token number\">254</span>:1    <span class=\"token number\">0</span>  <span class=\"token number\">3</span>.9G  <span class=\"token number\">0</span> lvm  <span class=\"token punctuation\">[</span>SWAP<span class=\"token punctuation\">]</span>\n  â””â”€vg-home   <span class=\"token number\">254</span>:2    <span class=\"token number\">0</span> <span class=\"token number\">33</span>.6G  <span class=\"token number\">0</span> lvm  /home\nsdb                       <span class=\"token number\">8</span>:16   <span class=\"token number\">0</span>  <span class=\"token number\">1</span>.8T  <span class=\"token number\">0</span> disk \nâ”œâ”€sdb1                    <span class=\"token number\">8</span>:17   <span class=\"token number\">0</span>  200M  <span class=\"token number\">0</span> part \nâ”œâ”€sdb2                    <span class=\"token number\">8</span>:18   <span class=\"token number\">0</span>  <span class=\"token number\">1</span>.8T  <span class=\"token number\">0</span> part \nâ””â”€sdb3                    <span class=\"token number\">8</span>:19   <span class=\"token number\">0</span>  128M  <span class=\"token number\">0</span> part \nsdc                       <span class=\"token number\">8</span>:32   <span class=\"token number\">0</span>  <span class=\"token number\">1</span>.8T  <span class=\"token number\">0</span> disk \nâ”œâ”€sdc1                    <span class=\"token number\">8</span>:33   <span class=\"token number\">0</span>  200M  <span class=\"token number\">0</span> part \nâ”œâ”€sdc2                    <span class=\"token number\">8</span>:34   <span class=\"token number\">0</span>  <span class=\"token number\">1</span>.8T  <span class=\"token number\">0</span> part \nâ””â”€sdc3                    <span class=\"token number\">8</span>:35   <span class=\"token number\">0</span>  128M  <span class=\"token number\">0</span> part \nsdd                       <span class=\"token number\">8</span>:48   <span class=\"token number\">0</span>  <span class=\"token number\">1</span>.8T  <span class=\"token number\">0</span> disk \nâ””â”€sdd1                    <span class=\"token number\">8</span>:49   <span class=\"token number\">0</span>  <span class=\"token number\">1</span>.8T  <span class=\"token number\">0</span> part </code></pre></div>\n<p>Here you can see my internal hard drive (sda) and my external hard drives (sdb, sdc, and sdd).  <code class=\"language-text\">sdd</code> is the new drive we'll be adding.</p>\n<p>I have a unique setup on my RAID array: I have used the entire disk instead of individual partitions.  It makes it easier to add and remove drives without worrying about matching the partition table.  If you used a specific partition, then recreate that partition table exactly upon the new drive before continuing.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># mdadm --create --verbose /dev/md0 --level=1 --raid-devices=2 /dev/disk/by-id/usb-WD_Elements_EXISTING_DISK_1-0:0 /dev/disk/by-id/usb-WD_Elements_EXISTING_DISK_2-0:0\n[... warnings about being part of an existing array ... ]\nmdadm: array /dev/md0 started.</code></pre></div>\n<p>Next, add the new drive to your RAID array and check /proc/mdstat about the progress.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># mdadm /dev/md0 --add /dev/disk/by-id/usb-WD_Elements_NEW_DISK_1-0:0\nmdadm: added /dev/disk/by-id/usb-WD_Elements_NEW_DISK_1-0:0\n\n# cat /proc/mdstat\nPersonalities : [linear] [multipath] [raid0] [raid1] [raid6] [raid5] [raid4] [raid10] \nmd0 : active raid1 sdd[2](S) sdc[1] sdb[0]\n      1953350656 blocks super 1.2 [2/2] [UU]\n      [&gt;....................]  resync =  0.8% (16522496/1953350656) finish=1121.6min speed=28778K/sec\n      bitmap: 15/15 pages [60KB], 65536KB chunk\n\nunused devices: &lt;none&gt;</code></pre></div>\n<p>From the output, we can see that the resync is beginning to the new disk.  It will take a while -- especially these drives being connected over USB 3.  The advantage of building your LUKS or LVM devices upon the base MD array is that you're now done!</p>"}},{"node":{"id":"d677f08c-aaf4-56ed-8968-be1f8dc771c7","frontmatter":{"title":"Showing the commit version on your static site using serverless functions","path":"/writing/using-serverless-github-hash","date":"12 June 2019","attract":"A quick serverless example.","commentary":null},"html":"<!-- main -->\n<table>\n<thead>\n<tr>\n<th>Update history</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em>2019-06-13</em></td>\n<td>Add bonus step about using React hooks.</td>\n</tr>\n<tr>\n<td><em>2019-06-13</em></td>\n<td>Use GitHub API token in example.</td>\n</tr>\n</tbody>\n</table>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQDBQL/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABg1r8WSOiNOcF4P/EABsQAAIDAQEBAAAAAAAAAAAAAAECAAMRExIi/9oACAEBAAEFAtE5sJrwKPLG7WXoWrUixQgp+q//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAcEAACAgIDAAAAAAAAAAAAAAAAEQECECESMoH/2gAIAQEABj8COs45vwdb6GzY6kTJ/8QAHBABAAMAAgMAAAAAAAAAAAAAAQARITFBUWFx/9oACAEBAAE/IYJ7LvkR5GEIoOWyKdLwubOvWTFmIypPcWMtJ//aAAwDAQACAAMAAAAQ9Ni+/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAEDAQE/EGd//8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAECAQE/ECN//8QAHRABAQEAAgIDAAAAAAAAAAAAAREAITFBcWGRof/aAAgBAQABPxAlOX0XBCZomIwL8miQAIDvvURqQTD08Y6LhBHjLlHmLT91pIhyn1dBysYb/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"macbook goran ivos\"\n        title=\"macbook goran ivos\"\n        src=\"/static/e2ce268f39fa43741529d49aa941a755/a111b/macbook_goran_ivos.jpg\"\n        srcset=\"/static/e2ce268f39fa43741529d49aa941a755/aca85/macbook_goran_ivos.jpg 163w,\n/static/e2ce268f39fa43741529d49aa941a755/0954f/macbook_goran_ivos.jpg 325w,\n/static/e2ce268f39fa43741529d49aa941a755/a111b/macbook_goran_ivos.jpg 650w,\n/static/e2ce268f39fa43741529d49aa941a755/ce471/macbook_goran_ivos.jpg 975w,\n/static/e2ce268f39fa43741529d49aa941a755/bee4e/macbook_goran_ivos.jpg 1300w,\n/static/e2ce268f39fa43741529d49aa941a755/8179c/macbook_goran_ivos.jpg 1600w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n    </span>\nPhoto by <a href=\"https://unsplash.com/@goran_ivos\">Goran Ivos</a> on <a href=\"https://unsplash.com/search/photos/code\">Unsplash</a></p>\n<p>The Git ecosystem is pretty amazing and I'm grateful that it exists.  In this tutorial, I'll be showing you how I added the Git commit hash to the bottom of the website.  This is the first step on enabling versioning history on the site and we'll build the MVP using the Cloudflare Workers \"workers.dev\" free tier.</p>\n<p>This tutorial consists of:</p>\n<ol>\n<li>Generating a personal access token on GitHub</li>\n<li>Writing the serverless Cloudflare worker</li>\n<li>Writing a React component to fetch the Cloudflare worker</li>\n<li><strong>Bonus</strong> Rewriting the React component using React hooks</li>\n</ol>\n<h2>Step 1: Generating a personal access token on GitHub</h2>\n<p>Head on over to <a href=\"https://github.com/settings/tokens\">https://github.com/settings/tokens</a> to create your personal access token.  This will be needed to increase our rate limit from the default access of 60 requests an hour per IP address to the authenticated access which allows 5,000 requests per hour.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2a1d1ef823f8a3001de759b39848fbb6/12f40/github-personal-access-tokens.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABmElEQVQ4y+2R207bQBCG902qSqhVORQISYCeVC6Q+sIVQQhE0pI48BC9ahubrB3ba6+9B//MrhVy16TqbUf69M96Z8f/zrKz8y/onnxA7/QT6Ufsd0/w9ugYex3isI/D3jvskrrvnf570lNs73fxYusNXr7aId3G690D7B0co9f/DHY1nGBwPcLF4BJfLwa4uR1iEkwxngSk95jeP/h8PJn69Zj27sYBRt++E3eeZW0QPIBhTTRNg7U1hG2sz9miUPjxWEOq9qDWGpzHmM1ChGGIKIog8hyFVChrg6LSEJWBoLWUEkIIzCKOn1ECUUiwIk/xyBPwOEaaZbDWep1TU56kRIZwHuP3PMMvXiBKCvC0BF8IxEmCOE6wyASSvII2Fsw1cK4cxmjvUtU1yrJEXmpkpUEuW1JaS3JJF6R7Wj+OFpcbnzNjDJRS5KyBMoS2Xkn8t2W4Hy+j0o2nJrRpc3+GYM6ZrCpqpFHRHKWyNCvrtdIrF9qY59ztL2tco1V9s/6V2zfc/NXZag6bgj/ub+Dw7+J/w3+PJ4QlZORRQGG6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github personal access tokens\"\n        title=\"github personal access tokens\"\n        src=\"/static/2a1d1ef823f8a3001de759b39848fbb6/dbb61/github-personal-access-tokens.png\"\n        srcset=\"/static/2a1d1ef823f8a3001de759b39848fbb6/19bd1/github-personal-access-tokens.png 163w,\n/static/2a1d1ef823f8a3001de759b39848fbb6/d3bcb/github-personal-access-tokens.png 325w,\n/static/2a1d1ef823f8a3001de759b39848fbb6/dbb61/github-personal-access-tokens.png 650w,\n/static/2a1d1ef823f8a3001de759b39848fbb6/6b691/github-personal-access-tokens.png 975w,\n/static/2a1d1ef823f8a3001de759b39848fbb6/91670/github-personal-access-tokens.png 1300w,\n/static/2a1d1ef823f8a3001de759b39848fbb6/12f40/github-personal-access-tokens.png 2048w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Once you have signed in, click on <strong>Generate new token</strong> and give it a name.  You won't need to enable any scopes if your repository is publically available on GitHub.  If it isn't, select the <strong>repo:status</strong> scope.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b63e366179e7192904509b4d81c2ab94/12f40/github-new-personal-access-token.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACFElEQVQ4y61T227TQBD1nyAkBKKURmnTNOUmeEDih6sGoVa0NHUSPgKRNHFix7e1HSde24eZAaMkuPDCSkdndzx7dm423r3/gFbnFY5P3xC/RqPVwcHRCQ4OT/C82Uaz/QL7xI2jDg7bL+n7KfYaLTx49BQPHz8j3sOT/Sb5dnDcfgvj05WJ7sU1zrsfcXbexeXnK5j9IW7NvvBg+BXmYIg+Qez9AXq3Jq6/3BB6wjc9k2zkbw5h4D8vI0gyfHPWSLNSDFrnmM9tfB+NMB7f4W4yFbZtG6vVmrDaQrrBWmsYSRTCcX24ngelFIqigOu6WBDYJntPwXITTJxQMHUUxnYIaxHSnQhRFCGkuyJYFDltMmRZJgaOc247cBYu/CAgUX4sgB9GyHSBLP+JghzLupTr6hBFMUXoIVmmUgJ+SOc5yrIglV+QVZJtG8bmQVyIZ7O51E1RKkmSSCl4HyQaXqzhJ7lA5+Ufor8j3BRdrdcIQ4U1cU6RcY0kdV8hUDGWq0zEiqImwl3BCtwQx3Fkv6TU+ez5vjyyuzazq42Qo7JmM/h+IGdFNeVG2c6CGhWKH09DLnUtt+7XCnLHJzR/yzSVc0DpV4IVM3gSuLY8n/+MkOeqEkyJOcqYGhQqbtQSUZzQGOmtSO8V5DGZWhZG1Gm+ENNlHiNuDP8V962/pmxZM0ynFnIS5Lnk9FiUG8SP7Daxwg/0i1lSRbFmkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github new personal access token\"\n        title=\"github new personal access token\"\n        src=\"/static/b63e366179e7192904509b4d81c2ab94/dbb61/github-new-personal-access-token.png\"\n        srcset=\"/static/b63e366179e7192904509b4d81c2ab94/19bd1/github-new-personal-access-token.png 163w,\n/static/b63e366179e7192904509b4d81c2ab94/d3bcb/github-new-personal-access-token.png 325w,\n/static/b63e366179e7192904509b4d81c2ab94/dbb61/github-new-personal-access-token.png 650w,\n/static/b63e366179e7192904509b4d81c2ab94/6b691/github-new-personal-access-token.png 975w,\n/static/b63e366179e7192904509b4d81c2ab94/91670/github-new-personal-access-token.png 1300w,\n/static/b63e366179e7192904509b4d81c2ab94/12f40/github-new-personal-access-token.png 2048w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Scroll down and select <strong>Generate token</strong>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ad0921266dad3744fcaa40ec4b6c1821/12f40/github-created-personal-access-token.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/UlEQVQ4y61S227TQBD1n8ADAgEtvZCkLTfBAxI/jBqEQLQQJ2kfKRcJ1NImNLEdX9fr9a69Pow3aaWWkqgSIx2d2ZnRzPGMrRcvX6Gx+QTNrWfET7HS2MSDhxtYXiestbDWfIQl4jq+3npMvIV7Kw3cuHUXN2/fN3xnaRXLqxtotp7DervTRfvdLrbbb/B6u433H3bQ7fVhd3vEe+jv7Rvf7vbN26Zcx+5h92MHnzq2gclTrtfbh4V/WHWGCnOt1LOCGVsRVzjyJISaBoqiRBj4mLgOvBrOGBlnUFJACo48FxCyQKVLE4+jEDxlkHEMJTJYnMXw/BB+ECBOElJUYRTm+OUJQobjmt0Mhw7HkZPi0BX46RUYhgXGSQWHVZhkAJWASVKoaVJRKCiliAuj8sRP8Xng4+tpiAPiL8PA4GAQ4Nsoxg8nwfdRRH5keBDnOKaufiqv3mEiArjhb/jJGG4wxCQ6NahjE+YhVRG4Cs/BZIjYH0NkDFb9iZfBUo4gjKlJhglN92Jh4EYCEaMd5jmyTJxDiJz2KlGW+rLC2W1NY02Hq+iKmKFCQdALrm5J2h3nHFIV4FIbsHzKQmmjuB4w3e/UZ6KktZRI89LUMONrZOSbT9aa1NTTdWWUnKF+/70SXKypLtZbuKZVC/70K48yH5ibv7bCRfbfG/4Btq9cmznEOUIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github created personal access token\"\n        title=\"github created personal access token\"\n        src=\"/static/ad0921266dad3744fcaa40ec4b6c1821/dbb61/github-created-personal-access-token.png\"\n        srcset=\"/static/ad0921266dad3744fcaa40ec4b6c1821/19bd1/github-created-personal-access-token.png 163w,\n/static/ad0921266dad3744fcaa40ec4b6c1821/d3bcb/github-created-personal-access-token.png 325w,\n/static/ad0921266dad3744fcaa40ec4b6c1821/dbb61/github-created-personal-access-token.png 650w,\n/static/ad0921266dad3744fcaa40ec4b6c1821/6b691/github-created-personal-access-token.png 975w,\n/static/ad0921266dad3744fcaa40ec4b6c1821/91670/github-created-personal-access-token.png 1300w,\n/static/ad0921266dad3744fcaa40ec4b6c1821/12f40/github-created-personal-access-token.png 2048w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Copy this value as we'll need it in the next section.</p>\n<h2>Step 2: Writing the serverless Cloudflare worker</h2>\n<p>In another tab, open up <a href=\"http://workers.dev\">workers.dev</a> and log in.   You'll be presented with a start page.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f0cfb4b2533bf5933537c4a00b327aef/12f40/cloudflare-workers-homepage.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABuElEQVQ4y51TTW+jMBDlH+eWH9Pf0Osqlz30vtJKlXrYVpW2SgsJGAgE/AXGrzN2SNFuKkV50ovJePz8xmMnujugefoJm78AowJ0C6+PxPZbwhwpTaCv91CHHJJo2hKjPCARVYO6rqC0xqG3qDuNTlnYYYSxl2kHR+MAbSKlNlDGQlMs6ZRBT5RS0mQUGohuHDGOPLrwff7vHKylxUoRNYwxmCjGcc5NQFA0med5CF7C5D3cFMngzff7PYQQqKqK4tM5N/Hefy2kCTfvduJyfoYiZ6Is0XXdeQ2Dc4PDwU2oe4MsS7HdbrHb7cKoyAnjx+M77h6ecf/rb3CrlERJguwwinlW498oOFEpluovioIaVIeSeHc+M8Zr3uL3W4k/WRPLJxGt+fx0aEZLPRjG6DKZrYYd/inPX4gxeLM0/aCKMhSiwodoQjP/O8OlyFKMx+lEhg6uLNyc46dT3sLhtZybN5yukSexWKD/KvlazIt6vjZ5gTTbhe/l3G2C9Dq2okVaHUP57Hiu4CZBSQ+hKONz5W7Pt+FmQb4qZXMMgvz0mOeXcougpisiWhmcMjabDVarFdbrNT4BM3GT71Nh5JYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cloudflare workers homepage\"\n        title=\"cloudflare workers homepage\"\n        src=\"/static/f0cfb4b2533bf5933537c4a00b327aef/dbb61/cloudflare-workers-homepage.png\"\n        srcset=\"/static/f0cfb4b2533bf5933537c4a00b327aef/19bd1/cloudflare-workers-homepage.png 163w,\n/static/f0cfb4b2533bf5933537c4a00b327aef/d3bcb/cloudflare-workers-homepage.png 325w,\n/static/f0cfb4b2533bf5933537c4a00b327aef/dbb61/cloudflare-workers-homepage.png 650w,\n/static/f0cfb4b2533bf5933537c4a00b327aef/6b691/cloudflare-workers-homepage.png 975w,\n/static/f0cfb4b2533bf5933537c4a00b327aef/91670/cloudflare-workers-homepage.png 1300w,\n/static/f0cfb4b2533bf5933537c4a00b327aef/12f40/cloudflare-workers-homepage.png 2048w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Click <strong>Create a Worker</strong>.  Now you will see a very simple (and working!) Cloudflare worker definition.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/acb4d237243e13716b22de81ab4ebd16/12f40/cloudflare-default-new-worker.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABw0lEQVQ4y5WTzW7bMBCE9cQ+5uEM9BmKHHJp3CKHxvWPRFGU+CNK5HSWkuG0cB2X8AfS5nq43B1WrlPQL18QzztgDsi+u0uSORh4fcbQHODaIywJpsZsW1TjNEHVZ3SdRmcGpAzwU7g3EpkZJPHjlBAKGVVnPeq2Q6sp2HWw1hZCYLYpIc0zZhJjXBjH65pMTGiMEwY/woYRleVCxN73exwPBxiu21aj7wcMFPY+EF+y16bnXlviG6WgVFti5fCRBwXGVnOaS2aaGx2DhUY1GIaembIE3BcU9xVFIjOK8U+KGJG5koA+GrjUIySPkMNf1crIOZVrp5Tw2SiCJ23wXvPa9QH7008YNsg7h2meWPS5COa8tEnme7DLkXdPFAB6FjWwbpFX9Y7N8ZaiUVQo/KDgYpC0csss+f8y5Nnrl3QbLLPU7zOxRfBfQiuXDB8d1fVd5A/X+yjIDtM2v441jqe6WEcwxtBaA5zzMH2/WI/+rG5ldKndZS0vptXLH+QVOTqgp4gYWkoxrIJCJT9e4fOxrrhfr09RaRrdtI9fWVK+YNe5aRRed9/x7XWHr8/P+PH2drMBYnYZ2+0Wm80GT09P+A1/LJJY7VBEWAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cloudflare default new worker\"\n        title=\"cloudflare default new worker\"\n        src=\"/static/acb4d237243e13716b22de81ab4ebd16/dbb61/cloudflare-default-new-worker.png\"\n        srcset=\"/static/acb4d237243e13716b22de81ab4ebd16/19bd1/cloudflare-default-new-worker.png 163w,\n/static/acb4d237243e13716b22de81ab4ebd16/d3bcb/cloudflare-default-new-worker.png 325w,\n/static/acb4d237243e13716b22de81ab4ebd16/dbb61/cloudflare-default-new-worker.png 650w,\n/static/acb4d237243e13716b22de81ab4ebd16/6b691/cloudflare-default-new-worker.png 975w,\n/static/acb4d237243e13716b22de81ab4ebd16/91670/cloudflare-default-new-worker.png 1300w,\n/static/acb4d237243e13716b22de81ab4ebd16/12f40/cloudflare-default-new-worker.png 2048w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>You can test the template by clicking <strong>Save and deploy</strong> and then issuing <code class=\"language-text\">curl &lt;worker address&gt;</code> in a terminal or opening the address in a web browser.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ curl blue-union-3e08.plktio.workers.dev\n\nhello world</code></pre></div>\n<p>There are a couple things we need to remember before writing a line of code:</p>\n<ul>\n<li>From the GitHub API <a href=\"https://developer.github.com/v3/#user-agent-required\">docs</a>, we'll need to specify a user-agent when querying the API.</li>\n<li>The API in question (also available in the <a href=\"https://developer.github.com/v3/#user-agent-required\">docs</a>) is <code class=\"language-text\">https://api.github.com/repos/xocite/plktio/branches/master</code>.  Replace <code class=\"language-text\">xocite</code> with your username and <code class=\"language-text\">plktio</code> with your repo name.</li>\n</ul>\n<p>We'll write one extra function to fetch the hash from the GitHub server and then update the handle request function to return commit.  </p>\n<p>Let's declare the personal access token and GitHub API endpoint as constants we can access throughout the script.  Remember to replace the endpoint and token with your own.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">GITHUB_URL_ENDPOINT</span> <span class=\"token operator\">=</span> <span class=\"token string\">'https://api.github.com/repos/xocite/plktio/branches/master'</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">GITHUB_PERSONAL_ACCESS_TOKEN</span> <span class=\"token operator\">=</span> <span class=\"token string\">'65d882ecc9f7d4980409c669cb23a3d068fdb059'</span></code></pre></div>\n<p>Next, we'll write the function to get the GitHub commit hash, keeping in mind that a user agent is required per the GitHub API <a href=\"https://developer.github.com/v3/#user-agent-required\">docs</a>.</p>\n<p>Here's the first version of the function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fetchGitHub</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> init <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    method<span class=\"token punctuation\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\n    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Cloudflare/workers/xocite'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> init<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> hash <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>commit<span class=\"token punctuation\">.</span>sha\n\n  <span class=\"token keyword\">return</span> hash\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Next, we'll update the <code class=\"language-text\">handleRequest(request)</code> function to call our fetch function and respond with the commit hash.  Keep in mind that we'll also need to restrict access to the server calling this function -- so make sure you replace plkt.io with your domain name.  If you're running into errors calling this from the terminal, change the domain name to <code class=\"language-text\">&#39;*&#39;</code> until you have the function working.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">handleRequest</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  result <span class=\"token operator\">=</span> <span class=\"token function\">fetchGitHub</span><span class=\"token punctuation\">(</span><span class=\"token constant\">GITHUB_URL_ENDPOINT</span><span class=\"token punctuation\">)</span>\n  \n  <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> result\n  <span class=\"token keyword\">const</span> init <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    status<span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">'Access-Control-Allow-Origin'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'plkt.io'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">,</span> init<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>To finish the function, we'll add our GitHub authorisation token to the fetch request to increase our rate limit.  Your final function should look something like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">GITHUB_URL_ENDPOINT</span> <span class=\"token operator\">=</span> <span class=\"token string\">'https://api.github.com/repos/xocite/plktio/branches/master'</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">GITHUB_PERSONAL_ACCESS_TOKEN</span> <span class=\"token operator\">=</span><span class=\"token string\">'65d882ecc9f7d4980409c669cb23a3d068fdb059'</span>\n\n<span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fetch'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">respondWith</span><span class=\"token punctuation\">(</span><span class=\"token function\">handleRequest</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">handleRequest</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  result <span class=\"token operator\">=</span> <span class=\"token function\">fetchGitHub</span><span class=\"token punctuation\">(</span><span class=\"token constant\">GITHUB_URL_ENDPOINT</span><span class=\"token punctuation\">)</span>\n  \n  <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> result\n  <span class=\"token keyword\">const</span> init <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    status<span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">'Access-Control-Allow-Origin'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'plkt.io'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">,</span> init<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fetchGitHub</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> init <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    method<span class=\"token punctuation\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\n    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">'User-Agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Cloudflare/workers/xocite'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'Authorization'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"token \"</span> <span class=\"token operator\">+</span> <span class=\"token constant\">GITHUB_PERSONAL_ACCESS_TOKEN</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> init<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> hash <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>commit<span class=\"token punctuation\">.</span>sha\n\n  <span class=\"token keyword\">return</span> hash</code></pre></div>\n<p>Make sure you see the hash on the right side when you click \"Run\".</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/33c39e1c5a7e3231dff32130d94f832f/12f40/cloudflare-edited-worker.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/0lEQVQ4y41T2Y7bMBDzF+cxHxegn9Gn3QJtdrFx4kuyrMM6zHKUJkiLbRsBjCJ5RA01nMbpEerrF8TLC5ADNqex+b+jyBxmeNVhGVq46QxLBN0j2wlNTBnT0GOeZ2izYAPu+NcoRGZQIWIuWLkIRKOtRzdOGPUMZSwWH7GECEeUnFFKQeYcY6xY1xWRqHNckVJEiAmzW3l2RSM/87ygHxTMYmGtg+XsnUcIAd4LfM1ezQZKaWhePinF/1dInFwic5NK5mZE11mcTh3eTh9opxHdrJH5TcSXrWCgisvlUgmmaaoYuScXriuzDCQkaROYslIex+M7gzQCs0k5VZRfhBsJU0qfYtt+f+3Gc9M5Bz0MiG5B9g7JWRbco/CNboR/Hnwc8u2GxkXRnsB3hWW2loTrGoTmXu8b4TOohEpn9L1ncQwLQ48xu0dCkX7L8L+EgZI1q9y+vcNrhfQgOTNTIRRriH2ezJDeEj/xcJaDvECIZF24Zn5V8rOj8SQzZqNtJlrD0BqCFsuy3GWL5NO5x/nS0ypjhXSWxIhHjTH0pq6WYpVpbJMxDIbVZqcshkHuoQGvksdJVVNba6srhESMLE9xIxQ0EigGvXaAru21sFPEuLI3qgnt0D0vubYaISQCcb50xcvrN3ycWnz/caTU7tMCSI/LOBwO2O122O/3+AmWfo6t39s6SwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cloudflare edited worker\"\n        title=\"cloudflare edited worker\"\n        src=\"/static/33c39e1c5a7e3231dff32130d94f832f/dbb61/cloudflare-edited-worker.png\"\n        srcset=\"/static/33c39e1c5a7e3231dff32130d94f832f/19bd1/cloudflare-edited-worker.png 163w,\n/static/33c39e1c5a7e3231dff32130d94f832f/d3bcb/cloudflare-edited-worker.png 325w,\n/static/33c39e1c5a7e3231dff32130d94f832f/dbb61/cloudflare-edited-worker.png 650w,\n/static/33c39e1c5a7e3231dff32130d94f832f/6b691/cloudflare-edited-worker.png 975w,\n/static/33c39e1c5a7e3231dff32130d94f832f/91670/cloudflare-edited-worker.png 1300w,\n/static/33c39e1c5a7e3231dff32130d94f832f/12f40/cloudflare-edited-worker.png 2048w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Step 3: Writing a React component to fetch the Cloudflare worker</h2>\n<p>Finally, we'll update the code for the website to call the worker.  For this tutorial, we'll be building this into my existing codebase -- which means we'll be using React components with GatsbyJS.</p>\n<p>Open up VSCode in the folder for your website and create a new component entitled 'git_details.js' under 'src/components'.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4e0d2cbeb8cdd2c293e67ec3642b8be4/349eb/vscode-add-git-details.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.46478873239437%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB50lEQVQ4y2PYVz2J/cbppWF37hyMeXr3dNTDW8ejHtw8FnX/xtGoe9ePRJ07sR2MTx3ZHHUeSMPEkfHNywdibl46EHxoz2ouhtLsRKk7V3b/+/vt/v9v72////Dy8v9Xj879f/fs8v/3zy//f/v0EhRfBNMgMXT84cWV/w9uHPu+fuVsVYbUpBCZO5d3f/n39eH/n5/u/vn16c7fnx/v/P31+d7f3wQwVM3v/7+e/v/x4c7bDavnqjGkJUVI3zy34ev/7w/+///+6O+/bw//kYj//v/55P/3D7ffb12/QI0hIdpH5vq57V///3j8H6Tg79cH/0nEf0EuBBm4ZR3QwJSEIJmbF3YCDXwENxBIE40xDEyK9Ze5cX4HigspMjAzNULm/vUD1DMwNzNG5sGNQ9QzMCcjekgYeBCYDiGSQPyPRAxJh+/hBsZIP7p17Mv/3y/+A135B5S4gUnoL5gmDv/5//vp/1+f7r7bAkrYidEeMuePLv799c1ZUNb7//vzfTANzFZYE/KfL/fBciD8G8T+BFQH9Pq751e+bFoLzHqmBiJcxWl6gcWZlpE9XXXhE/ubI7o66yL6exsjZk3riJg5pT1i5lQIngXE0ya3Rkzoa4qYAJSfBFQLxOFA9ZE93Q0BpQWpPAD/svqG5TnW1wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vscode add git details\"\n        title=\"vscode add git details\"\n        src=\"/static/4e0d2cbeb8cdd2c293e67ec3642b8be4/dbb61/vscode-add-git-details.png\"\n        srcset=\"/static/4e0d2cbeb8cdd2c293e67ec3642b8be4/19bd1/vscode-add-git-details.png 163w,\n/static/4e0d2cbeb8cdd2c293e67ec3642b8be4/d3bcb/vscode-add-git-details.png 325w,\n/static/4e0d2cbeb8cdd2c293e67ec3642b8be4/dbb61/vscode-add-git-details.png 650w,\n/static/4e0d2cbeb8cdd2c293e67ec3642b8be4/6b691/vscode-add-git-details.png 975w,\n/static/4e0d2cbeb8cdd2c293e67ec3642b8be4/91670/vscode-add-git-details.png 1300w,\n/static/4e0d2cbeb8cdd2c293e67ec3642b8be4/349eb/vscode-add-git-details.png 2272w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>We'll need to keep the following in mind:</p>\n<ul>\n<li>We're building a React component class that performs network activity, so we'll need to keep the network activity inside the <code class=\"language-text\">componentDidMount()</code> function.  More details on the <a href=\"https://reactjs.org/docs/react-component.html#constructor\">React documentation</a>.</li>\n<li>We don't want the hash to unexpectantly appear on the page so we'll set a default value in the constructor.</li>\n</ul>\n<p>The final class looks something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GitDetails</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Fetching hash...\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'https://blue-union-3e08.plktio.workers.dev/'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> method<span class=\"token punctuation\">:</span> <span class=\"token string\">'GET'</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GitDetails</code></pre></div>\n<p>Next, we can import that in our layout.js file </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cd1ba67ce0f2b6e425617ff63fd20ae9/349eb/vscode-modify-layout.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.46478873239437%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC/ElEQVQ4y42T20/TYBTA92ZCfPRJ9uoejS8++B/4YtQQZasjRgUCxgtxLr4ooD6gEyEYNaDxFt4kBIIieHngJiiCXDZ3b9eO24Ct7bp23a09npbBhpnGh19O+7X9fed859Qw3ty5x/29+7TTNWwNuMaIpeAUsUxNE4x/iiA9E8TCzCdiZnKQmJ54Ryz8+EhQ3gmCdI/rz7RIYfQ7R63exZGK0S89ZYabtvr9vvkhNRKehqXgN5A5D+REGhIbHohHnIgLuDUnsKtOPfJ4X8z2Gu2blPvfPj9gqK8+ZfQvfhZlIQQyH8wlYm5F4oKKwFFKIs4oosAoWZFWQA4ralKD2UFbkwUym5ZoyAhkbKD3pclQV20p9872SZJAQjJOKrEYqUY3g2qcC6mSQKupREhVJLokkGTUlEApUoLGygJcb88rk+FC1THjr58fJBkXU3FSTbBBkAUKcrirhpIHM9q5Ll7DdxRIL0OKD3CD/W8ww/MVRs/8MAqxZBSm2ACwnB8iXADWERbvJT6oy9XktmjXBgrkVoFfd3OOliaToebscaN7bkhKiVsZplESjwdhAyWbfAB4jBncTJEYXbIl3b5mdoSxVSdnt102GS7VWoyUewTPkAaR9avcpg/C2DUKu0wjkXUP8FE/JHkfpIVAXrbrGHRhFIXXrl81GRouVhlD3jFJxC5LKBTwDEXMEhsEWufTGHVQlvmHUMvwhv2KJrQaKc+olMaSsTQ1hx+AnCdZKA1HJk/pkrk1F9d8y14Qal3G7FSWpUCMhxDcQCw0okCJDDMr+tj097woFlJYkgcHNYCzx/x19kqgj40mHOx7jU2ps5aH/ZMiZCMAqXBOm36MW8j/RQ6yK9qfwr7XhOfOHDXOfe3OStFZPHgSsjgiWsxgxn8OclarooisGNJEoMphYNdc4kAvlnz40L4yW+3Bk7b6I5ZWR2NlR/tds+N+o7n94W3zs6f3zF2PW8xdT1rMnRg72u6Y21qb9Wcaj/BdpLLV0WR54Gg6YW+o2fsbPZXxhXNY698AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vscode modify layout\"\n        title=\"vscode modify layout\"\n        src=\"/static/cd1ba67ce0f2b6e425617ff63fd20ae9/dbb61/vscode-modify-layout.png\"\n        srcset=\"/static/cd1ba67ce0f2b6e425617ff63fd20ae9/19bd1/vscode-modify-layout.png 163w,\n/static/cd1ba67ce0f2b6e425617ff63fd20ae9/d3bcb/vscode-modify-layout.png 325w,\n/static/cd1ba67ce0f2b6e425617ff63fd20ae9/dbb61/vscode-modify-layout.png 650w,\n/static/cd1ba67ce0f2b6e425617ff63fd20ae9/6b691/vscode-modify-layout.png 975w,\n/static/cd1ba67ce0f2b6e425617ff63fd20ae9/91670/vscode-modify-layout.png 1300w,\n/static/cd1ba67ce0f2b6e425617ff63fd20ae9/349eb/vscode-modify-layout.png 2272w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Now, running this locally, we can see the result working.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; border-style: solid; max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2724716150dee50537a1b1706cfb0be2/12f40/plktio-git-hash.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABHklEQVQ4y+1S226EIBTc//+5vjVpmjR1xfulICCK4PRAo8luNsZN+9hJxnNBx8PAZfUrrm8tio8eRltYC9jZwTuPgHVdd97Xj3hx9OH7S4bP1wqST+AcGHoDOzncYxM9wmUhwVEV0LpDlmVomwpVVVLOwFIWe3meI01T6lcxhpoxhiRJ4nrodV33I+hpy1IOkWIQEEJgnmc477AsS6RzLvZCbq3dGXpbHt6JgsHD6spRM46+luhKAd4oiEZDDUSlYIzBGUQPw2M29LdxoegwjQ6jJipLQnafcjPde/+Q+6GEoq7Jt7JBXbQUadKvhQ5nIl8dnkWcUEqJgTxUSkJpSZNp4hg2ceqq3FybY09wc/9OT3jEZ8SiIP4Y/4K/xzcoZJ3fgbyNegAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"plktio git hash\"\n        title=\"plktio git hash\"\n        src=\"/static/2724716150dee50537a1b1706cfb0be2/dbb61/plktio-git-hash.png\"\n        srcset=\"/static/2724716150dee50537a1b1706cfb0be2/19bd1/plktio-git-hash.png 163w,\n/static/2724716150dee50537a1b1706cfb0be2/d3bcb/plktio-git-hash.png 325w,\n/static/2724716150dee50537a1b1706cfb0be2/dbb61/plktio-git-hash.png 650w,\n/static/2724716150dee50537a1b1706cfb0be2/6b691/plktio-git-hash.png 975w,\n/static/2724716150dee50537a1b1706cfb0be2/91670/plktio-git-hash.png 1300w,\n/static/2724716150dee50537a1b1706cfb0be2/12f40/plktio-git-hash.png 2048w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>That's it for including the Git commit hash on your deployment using serverless functions.</p>\n<h2>Step 4: Rewriting the React component using React hooks</h2>\n<p>We can make our Cloudflare worker even simpler by using React hooks.  They allow you to write simple functions instead of using classes.  Additionally, managing the state of the component is easier than using classes.  You can read more about them on the <a href=\"https://reactjs.org/docs/hooks-intro.html\">React blog</a>.</p>\n<p>In our original class, we set the state in the constructor.  With React hooks, we'll set the state in the beginning of the function instead.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">GitDetails</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token string\">\"Fetching hash...\"</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>result<span class=\"token punctuation\">,</span> setResult<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Next, we'll move the contents of the <code class=\"language-text\">componentDidMount()</code> method into the <code class=\"language-text\">useEffect()</code> method hook.  This new method combines <code class=\"language-text\">componentDidMount()</code>, <code class=\"language-text\">componentDidUpdate()</code>, and <code class=\"language-text\">componentDidUnmount()</code>.  This hooks lets us tell React to run it after we complete the render. </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://blue-union-3e08.plktio.workers.dev/'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> method<span class=\"token punctuation\">:</span> <span class=\"token string\">'GET'</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token function\">setResult</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Because useEffect will run after componentDidUpdate -- potentially resulting in multiple fetches -- we will tell it to skip re-rendering the effect if a component value changes.  </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Before</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// After</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Finally, because we're writing a function and not a class we will move the contents of the render call inside the return call.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span>result<span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Great.  Now our final React hook function looks like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">GitDetails</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token string\">\"Fetching hash...\"</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>result<span class=\"token punctuation\">,</span> setResult<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'https://blue-union-3e08.plktio.workers.dev/'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> method<span class=\"token punctuation\">:</span> <span class=\"token string\">'GET'</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token function\">setResult</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>result<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> GitDetails</code></pre></div>\n<p>React hooks are easy to use and make it easier to debug your code so I encourage you to use them when writing new code.</p>\n<h2>Recap</h2>\n<p>To recap:</p>\n<ul>\n<li>We retrieved our personal access token from GitHub because authenticated users have an increased rate limit of 5,000 requests an hour.</li>\n<li>We wrote a basic Cloudflare worker that receives a request, contacts GitHub via the API, and responds with a commit hash.</li>\n<li>We wrote a React component class that calls our Cloudflare worker and displays the result in the page.</li>\n<li><strong>Bonus</strong> We rewrote the React component class into a simpler function using React hooks.</li>\n</ul>\n<p>Thank you for reading this tutorial all the way to the end.  I hope it was helpful to understand the basics of connecting serverless functions with your static websites!</p>"}},{"node":{"id":"e63ef221-191c-5085-b46d-d2c0e9f7cfee","frontmatter":{"title":"Building my new home on the web","path":"/writing/building-my-new-home","date":"31 May 2019","attract":"Understand why I began the plkt.io project and weblog.","commentary":null},"html":"<p>I've been writing online for years.  Near the end of Geocities in 2009 and shortly after my switch to Linux full-time, I started writing longer articles on <a href=\"https://antonyjepson.wordpress.com\">Wordpress</a>.  I used Wordpress until around 2016, when static websites were becoming huge.  I had being eyeing my own domain for some time, finally went ahead and bought <a href=\"https://antonyjepson.co.uk\">antonyjepson.co.uk</a>, and got right at home on AWS with S3+CloudFront.  While this was a great starting point for writing my own HTML/CSS/JS, my enthusiasm had gotten the better of me and I didn't have the time to make my website look polished despite writing many posts.</p>\n<p>Most recently, I've starting building my new home: <a href=\"https://plkt.io\">plkt.io</a>.  I have time to create a polished and candid reflection of my personality.  The JAMstack powering the website consists of GatsbyJS and React to define the site and Amplify to build the site.  Over time, I expect to move closer to React + Kubernetes for definition and deployment and I'll be documenting that transition here in all its glory.</p>\n<p>As stated in my original conception <a href=\"https://antonyjepson.co.uk/building-plkt-io/\">post</a>, plkt.io will the primary source to see what I'm working in both the virtual and real worlds.  I'll continue to write useful tutorials with the goal of making them more accessible â€” with clearer writing, code syntax highlighting, and more visual content.  All my code will be available here and mirrored to <a href=\"https://github.com/xocite/plktio\">GitHub</a>.  Finally, I'll continue to look into the feasability of hosting custom builds of open source projects here, perhaps through a common package registry.</p>\n<p>You should expect the website to be a living thing with prior content always accessible through the Git hash.</p>\n<p>All I can say is, <strong>watch this space</strong>!</p>"}}]}},"pageContext":{"isCreatedByStatefulCreatePages":true}}}